<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
			<title>Captions Handler Service REST Documentation</title>
	<style type="text/css">
	/* styles for the page */
	FIELDSET {
		margin-bottom: 2em;
		margin-top: 0.5em;
		padding-bottom: 1em;
		width: 90%;
	}
	TABLE.method {
		width: 100%;
	}
    TABLE.testing {
        width: 96%;
        border: 2px solid #CCC;
    }
    UL {
        margin: 0.2em;
        padding-left: 1em;
    }
    DIV.table_spacer {
        height: 2em;
    }
	DIV.footer {
		padding-top: 1em;
		font-weight: bold;
	}
	.method_set_header {
		padding-left: 0.5em;
		padding-right: 0.5em;
		font-size: 1.4em;
		font-weight: bold;
	}
	.method_header TH {
		background: #CCFF00 none repeat scroll 0 0;
		border-bottom: 3px solid #333;
		color: #669;
		font-size: 1.2em;
		font-weight: bold;
		padding: 0.6em 0.3em;
		text-align: left;
		vertical-align: middle;;
	}
    TH.method_header_left {
       text-align: right;
       padding: 0.6em 1em;
    }
	TR.method TH {
		border-bottom: 1px solid #CCC;
		color: #663;
		font-size: 84%;
		font-family: sans-serif;
		font-weight: normal;
		padding: 0.5em 1.0em;
		text-align: right;
		vertical-align: middle;
	}
	TR.method TD {
		border-bottom: 1px solid #CCC;
		font-size: 136%;
		padding-bottom: 0.2em;
		padding-left: 0.3em;
		padding-top: 0.2em;
		vertical-align: middle;
	}
    DIV.hidden_form {
        display: none;
    }
    TD.form_label {
        width: 10%;
        font-size: 0.9em !important;
    }
    TD.form_submit {
        border: none !important;
    }
	</style>
</head>
<body>
<h1>Captions Handler Service REST Documentation</h1>

<fieldset>
	<legend class="method_set_header">Read methods</legend>
	<table class="method" cellpadding="0px" cellspacing="0px" summary="Read method for teh GET /search REST endpoint, Name of the attribute followed by the value">
		<thead>
			<tr class="method_header">
				<th width="20%" scope="col" class="method_header_left">NAME</th>
				<th scope="col">VALUE and NOTES</th>
			</tr>
		</thead>
		<tbody>
			<tr class="method">
				<th scope="row">Method / Path:</th>
				<td><tt>GET /search</tt></td>
			</tr>
			<tr class="method">
				<th scope="row">Description:</th>
				<td>Searches for and retrieves a list of media which needs to be captioned</td>
			</tr>
            <tr class="method">
                <th scope="row">Required (path) parameters:</th>
                <td>
                    <em>NONE</em>
                </td>
            </tr>
			<tr class="method">
				<th scope="row">Optional (query) parameters:</th>
				<td>
	                <tt>count=0</tt>: number of results to return per page (0 indicates all or maximum allowed)
	                <br />
	                <tt>startPage=0</tt>: the page of results to display (0 is first page)
                    <br />
                    <tt>sort=title asc</tt>: the sort order to return items in, valid fields are date, title
				</td>
			</tr>
			<tr class="method">
				<th scope="row">Response formats:</th>
				<td><a href="http://json.org/">json</a> (<a href="../sample/search.json">sample</a>)</td>
			</tr>
			<tr class="method">
				<th scope="row">Status codes:</th>
				<td>
					200: OK, valid request, results returned
					<br />
					400: Bad Request, invalid arguments in request, error message
				</td>
			</tr>
            <tr class="method">
                <th scope="row">Notes:</th>
                <td>
                    <ul>
                        <li>The search is only a search for captionable items and not for all items in general</li>
                    </ul>
                </td>
            </tr>
            <tr class="method">
                <th scope="row">Testing:</th>
                <td>
                    <a href="#" class="form_link">Testing form</a>
                    <div class="hidden_form">
                        <form action="/captionsHandler/rest/search" method="get">
                            <table class="testing" cellpadding="0" cellspacing="0">
	                            <tr class="form_field">
	                                <td class="form_label">
	                                   <label for="search_count">count:</label>
	                                </td>
	                                <td>
	                                   <input id="search_count" name="count" type="text" value="0" />
	                                </td>
	                            </tr>
	                            <tr class="form_field">
	                                <td class="form_label">
	                                   <label for="search_startPage">startPage:</label>
	                                </td>
	                                <td>
	                                   <input id="search_startPage" name="startPage" type="text" value="0" />
	                                </td>
	                            </tr>
	                            <tr class="form_field">
	                                <td class="form_label">
	                                   <label for="search_sort">sort:</label>
	                                </td>
	                                <td>
	                                   <input id="search_sort" name="sort" type="text" value="title asc" />
	                                </td>
	                            </tr>
	                            <tr>
	                                <td colspan="2">
	                                    <div class="form_submit">
										   <input type="submit" value="SUBMIT" />
										   <input type="button" value="CANCEL" />
									    </div>
								    </td>
	                            </tr>
                            </table>
                        </form>
                    </div>
                </td>
            </tr>
		</tbody>
	</table>

    <div class="table_spacer"></div>

    <table class="method" cellpadding="0px" cellspacing="0px" summary="Read method for the GET /{id} REST endpoint, Name of the attribute followed by the value">
        <thead>
            <tr class="method_header">
                <th width="20%" scope="col" class="method_header_left">NAME</th>
                <th scope="col">VALUE and NOTES</th>
            </tr>
        </thead>
        <tbody>
            <tr class="method">
                <th scope="row">Method / Path:</th>
                <td><tt>GET /{id}</tt></td>
            </tr>
            <tr class="method">
                <th scope="row">Description:</th>
                <td>Retrieve a single captionable item</td>
            </tr>
            <tr class="method">
                <th scope="row">Required (path) parameters:</th>
                <td>
                    <tt>id</tt>: the media ID from the search result <br/>
                </td>
            </tr>
            <tr class="method">
                <th scope="row">Optional (query) parameters:</th>
                <td>
                    <em>NONE</em>
                </td>
            </tr>
            <tr class="method">
                <th scope="row">Response formats:</th>
                <td><a href="http://json.org/">json</a></td>
            </tr>
            <tr class="method">
                <th scope="row">Status codes:</th>
                <td>
                    200: OK, valid request, results returned
                    <br />
                    404: Not Found, item does not exist, error message
                </td>
            </tr>
        </tbody>
    </table>

</fieldset>

<fieldset>
	<legend class="method_set_header">Write methods</legend>
    <table class="method" cellpadding="0px" cellspacing="0px" summary="Write method for the PUT /{id}/{type} REST endpoint, Name of the attribute followed by the value">
        <thead>
            <tr class="method_header">
                <th width="20%" scope="col" class="method_header_left">NAME</th>
                <th scope="col">VALUE and NOTES</th>
            </tr>
        </thead>
        <tbody>
            <tr class="method">
                <th scope="row">Method / Path:</th>
                <td><tt>PUT /{id}/{type}</tt></td>
            </tr>
            <tr class="method">
                <th scope="row">Description:</th>
                <td>Updates a media item with captions data</td>
            </tr>
            <tr class="method">
                <th scope="row">Required (path) parameters:</th>
                <td>
                    <tt>id</tt>: the media ID from the search result <br/>
                    <tt>type</tt>: the media type from the search result
                </td>
            </tr>
            <tr class="method">
                <th scope="row">Optional parameters:</th>
                <td>
                    <em>NONE</em>
                </td>
            </tr>
            <tr class="method">
                <th scope="row">Response formats:</th>
                <td>
                    <em>EMPTY</em>
                </td>
            </tr>
            <tr class="method">
                <th scope="row">Status codes:</th>
                <td>
                    204: OK, data was added, result info in headers
                    <br />
                    400: Bad Request, data was not added, error message
                </td>
            </tr>
            <tr class="method">
                <th scope="row">Notes:</th>
                <td>Send the captions data in the body of the request</td>
            </tr>
        </tbody>
    </table>
</fieldset>

<fieldset>
	<legend class="method_set_header">General Notes</legend>
	<ul>
        <li>All paths above are relative to the REST endpoint base (something like http://your.server/captionsHandler/rest)</li>
		<li>If the service is down or not working it will return a status 503, 
		this means the the underlying service is not working and is either restarting or has failed</li>
		<li>A status code 500 means a general failure has occurred which is not recoverable 
		and was not anticipated. In other words, there is a bug! You should file an error report with
		your server logs from the time when the error occurred: 
		<a href="https://issues.opencastproject.org">Opencast Issue Tracker</a></li>
		<li>Here is a sample video for testing: <a href="/rest/samplevideo.mov">sample video</a></li>
	</ul>
</fieldset>

<div class="footer">
    Service of <a href="http://www.opencastproject.org/" title="Opencast Project">Opencast</a> 
    <a href="http://www.opencastproject.org/project/matterhorn" title="Opencast Matterhorn">Matterhorn</a>
</div>

<!-- JAVASCRIPT below here -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript">
(function($) {
    $("a.form_link").click(
        function() {
            var $this = $(this);
            var $form = $this.parent().find("div.hidden_form");
            $form.toggle(400);
            $this.parent().find("div.form_submit input").click(
            	function() {
            		$form.hide(200);
            		$this.show();
            	}
            );
            $this.hide();
            return false;
        }
    );
}(jQuery));
</script>

</body>
</html>