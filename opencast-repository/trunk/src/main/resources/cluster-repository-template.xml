<?xml version="1.0"?>

<!-- Copyright 2009 Opencast Project (http://www.opencastproject.org) -->
<!-- Licensed under the Educational Community License, Version 2.0 -->
<!-- (the "License"); you may not use this file except in compliance -->
<!-- with the License. You may obtain a copy of the License at -->
<!-- http://www.osedu.org/licenses/ECL-2.0 -->
<!-- Unless required by applicable law or agreed to in writing, -->
<!-- software distributed under the License is distributed on an "AS IS" -->
<!-- BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express -->
<!-- or implied. See the License for the specific language governing -->
<!-- permissions and limitations under the License. -->

<!DOCTYPE Repository PUBLIC "-//The Apache Software Foundation//DTD Jackrabbit 1.4//EN"
                            "http://jackrabbit.apache.org/dtd/repository-1.4.dtd">
<Repository>
  <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
    <param name="path" value="${rep.home}/repository" />
  </FileSystem>
  <Security appName="Jackrabbit">
    <AccessManager class="org.apache.jackrabbit.core.security.SimpleAccessManager">
      <!-- <param name="config" value="${rep.home}/access.xml"/> -->
    </AccessManager>
    <LoginModule class="org.apache.jackrabbit.core.security.SimpleLoginModule">
      <param name="anonymousId" value="anonymous" />
    </LoginModule>
  </Security>
  <Workspaces rootPath="${rep.home}/workspaces" defaultWorkspace="default" />
  <Workspace name="${wsp.name}">
    <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
      <param name="path" value="${wsp.home}" />
    </FileSystem>
    <PersistenceManager class="PERSISTENCE_MGR">
      <param name="url" value="DB_URL" />
      <param name="user" value="DB_USER" />
      <param name="password" value="DB_PASS" />
      <param name="driver" value="DB_DRIVER" />
      <param name="schemaObjectPrefix" value="${wsp.name}_" />
    </PersistenceManager>
    <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
      <param name="path" value="${wsp.home}/index" />
      <param name="textFilterClasses"
        value="org.apache.jackrabbit.extractor.MsWordTextExtractor,org.apache.jackrabbit.extractor.MsExcelTextExtractor,org.apache.jackrabbit.extractor.MsPowerPointTextExtractor,org.apache.jackrabbit.extractor.PdfTextExtractor,org.apache.jackrabbit.extractor.OpenOfficeTextExtractor,org.apache.jackrabbit.extractor.RTFTextExtractor,org.apache.jackrabbit.extractor.HTMLTextExtractor,org.apache.jackrabbit.extractor.XMLTextExtractor" />
      <param name="extractorPoolSize " value="2" />
      <param name="supportHighlighting" value="true" />
    </SearchIndex>
  </Workspace>
  <Versioning rootPath="${rep.home}/version">
    <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
      <param name="path" value="${rep.home}/version" />
    </FileSystem>
    <PersistenceManager class="PERSISTENCE_MGR">
      <param name="url" value="DB_URL" />
      <param name="user" value="DB_USER" />
      <param name="password" value="DB_PASS" />
      <param name="driver" value="DB_DRIVER" />
      <param name="schemaObjectPrefix" value="version_" />
    </PersistenceManager>
  </Versioning>
  <!--
    The search index relies on dependencies such as POI. TODO Add search dependencies to pom.xml
  -->
  <!--
    SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex"> <param name="path"
    value="${rep.home}/repository/index"/> <param name="textFilterClasses"
    value="org.apache.jackrabbit.extractor.MsWordTextExtractor,org.apache.jackrabbit.extractor.MsExcelTextExtractor,org.apache.jackrabbit.extractor.MsPowerPointTextExtractor,org.apache.jackrabbit.extractor.PdfTextExtractor,org.apache.jackrabbit.extractor.OpenOfficeTextExtractor,org.apache.jackrabbit.extractor.RTFTextExtractor,org.apache.jackrabbit.extractor.HTMLTextExtractor,org.apache.jackrabbit.extractor.XMLTextExtractor"/>
    <param name="extractorPoolSize " value="2"/> <param name="supportHighlighting" value="true"/>
    </SearchIndex
  -->
  <Cluster id="NODE_ID">
    <Journal class="org.apache.jackrabbit.core.journal.DatabaseJournal">
      <param name="revision" value="${rep.home}/revision.log" />
      <param name="driver" value="DB_DRIVER" />
      <param name="url" value="DB_URL" />
      <param name="user" value="DB_USER" />
      <param name="password" value="DB_PASS" />
    </Journal>
  </Cluster>
  <DataStore class="org.apache.jackrabbit.core.data.FileDataStore">
    <param name="path" value="DATA_STORE_PATH" />
    <param name="minRecordLength" value="100" />
  </DataStore>
</Repository>