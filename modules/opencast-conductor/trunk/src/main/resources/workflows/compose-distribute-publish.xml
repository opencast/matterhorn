<workflow-definition>
  <title>Transcode, Distribute and Publish</title>
  <description>
    A simple workflow that transcodes the media into distribution formats, then sends the resulting distribution files,
    along with their associated metadata, to the distribution channels.
  </description>
  <operations>
  
	<!-- encode to flash download -->
    <operation
      name="compose"
      fail-on-error="true"
      exception-handler-workflow="Default Error Handler"
      description="Encode presenter (camera) video to Flash download">
      <configurations>
        <configuration key="audio-source-track-flavor">*</configuration>
        <configuration key="video-source-track-flavor">track/presenter</configuration>
        <configuration key="target-track-flavor">track/presenter</configuration>
        <configuration key="target-track-tags">engage</configuration>
        <configuration key="encoding-profile">flash.http</configuration>
      </configurations>
    </operation>
    <operation
      name="compose"
      fail-on-error="true"
      exception-handler-workflow="Default Error Handler"
      description="Encode presentation (screen) to Flash download">
      <configurations>
        <configuration key="audio-source-track-flavor">*</configuration>
        <configuration key="video-source-track-flavor">track/presentation</configuration>
        <configuration key="target-track-flavor">track/presentation</configuration>
        <configuration key="target-track-tags">engage</configuration>
        <configuration key="encoding-profile">flash.http</configuration>
      </configurations>
    </operation>

	<!-- encode to flash streaming -->
	<!-- 
    <operation
      name="compose"
      fail-on-error="true"
      exception-handler-workflow="Default Error Handler"
      description="Encode presenter (camera) to Flash streaming">
      <configurations>
        <configuration key="audio-source-track-flavor">*</configuration>
        <configuration key="video-source-track-flavor">track/presenter</configuration>
        <configuration key="target-track-flavor">track/presenter</configuration>
        <configuration key="target-track-tags">engage</configuration>
        <configuration key="encoding-profile">flash.rtmp</configuration>
      </configurations>
    </operation>
    <operation
      name="compose"
      fail-on-error="true"
      exception-handler-workflow="Default Error Handler"
      description="Encode presentation (screen) to Flash streaming">
      <configurations>
        <configuration key="audio-source-track-flavor">*</configuration>
        <configuration key="video-source-track-flavor">track/presentation</configuration>
        <configuration key="target-track-flavor">track/presentation</configuration>
        <configuration key="target-track-tags">engage</configuration>
        <configuration key="encoding-profile">flash.rtmp</configuration>
      </configurations>
    </operation>
    -->

	<!-- encode to quicktime download -->
    <operation
      name="compose"
      fail-on-error="true"
      exception-handler-workflow="Default Error Handler"
      description="Encode presenter (camera) to quicktime/mp4 download">
      <configurations>
        <configuration key="audio-source-track-flavor">*</configuration>
        <configuration key="video-source-track-flavor">track/presenter</configuration>
        <configuration key="target-track-flavor">track/presenter</configuration>
        <configuration key="target-track-tags">atom</configuration>
        <configuration key="encoding-profile">mov-low.http</configuration>
      </configurations>
    </operation>
    <operation
      name="compose"
      fail-on-error="true"
      exception-handler-workflow="Default Error Handler"
      description="Encode presentation (screen) to quicktime/mpeg4 download">
      <configurations>
        <configuration key="audio-source-track-flavor">*</configuration>
        <configuration key="video-source-track-flavor">track/presentation</configuration>
        <configuration key="target-track-flavor">track/presentation</configuration>
        <configuration key="target-track-tags">rss, atom</configuration>
        <configuration key="encoding-profile">mov-low.http</configuration>
      </configurations>
    </operation>
    
   	<!-- encode to avi download -->
    <operation
      name="compose"
      fail-on-error="true"
      exception-handler-workflow="Default Error Handler"
      description="Encode presenter (camera) to avi/mpeg4 download">
      <configurations>
        <configuration key="audio-source-track-flavor">*</configuration>
        <configuration key="video-source-track-flavor">track/presenter</configuration>
        <configuration key="target-track-flavor">track/presenter</configuration>
        <configuration key="target-track-tags">atom</configuration>
        <configuration key="encoding-profile">avi-low.http</configuration>
      </configurations>
    </operation>
    <operation
      name="compose"
      fail-on-error="true"
      exception-handler-workflow="Default Error Handler"
      description="Encode presentation (screen) to avi/mpeg4 download">
      <configurations>
        <configuration key="audio-source-track-flavor">*</configuration>
        <configuration key="video-source-track-flavor">track/presentation</configuration>
        <configuration key="target-track-flavor">track/presentation</configuration>
        <configuration key="target-track-tags">rss, atom</configuration>
        <configuration key="encoding-profile">avi-low.http</configuration>
      </configurations>
    </operation>
 
    <!-- encode to cover image -->
	<!-- 
    <operation
      name="snapshot"
      fail-on-error="true"
      exception-handler-workflow="Default Error Handler"
      description="Encode presenter (camera) to cover image">
      <configurations>
        <configuration key="video-source-track-flavor">track/presenter</configuration>
        <configuration key="target-track-flavor">track/presenter</configuration>
        <configuration key="target-track-tags">atom</configuration>
        <configuration key="encoding-profile">cover.http</configuration>
      </configurations>
    </operation>
    <operation
      name="snapshot"
      fail-on-error="true"
      exception-handler-workflow="Default Error Handler"
      description="Encode presentation (screen) to cover image">
      <configurations>
        <configuration key="video-source-track-flavor">track/presentation</configuration>
        <configuration key="target-track-flavor">track/presentation</configuration>
        <configuration key="target-track-tags">rss, atom, engage</configuration>
        <configuration key="encoding-profile">cover.http</configuration>
        <configuration key="offset">0.5</configuration>
      </configurations>
    </operation>
    -->

    <operation
      name="distribute_local"
      fail-on-error="true"
      exception-handler-workflow="Default Error Handler"
      description="Distribute media to the local distribution channel">
      <configurations>
        <configuration key="tags">engage,atom,rss</configuration>
      </configurations>
    </operation>

    <operation
      name="publish"
      fail-on-error="true"
      exception-handler-workflow="Default Error Handler"
      description="Add metadata to the search index">
      <configurations>
      </configurations>
    </operation>
  </operations>
</workflow-definition>