<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Local Distribution Service REST Documentation</title>
  <style type="text/css">
  /* styles for the page */
  FIELDSET {
    margin-bottom: 2em;
    margin-top: 0.5em;
    padding-bottom: 1em;
    width: 90%;
  }
  TABLE.method {
    width: 100%;
  }
    TABLE.testing {
        width: 96%;
        border: 2px solid #CCC;
    }
    UL {
        margin: 0.2em;
        padding-left: 1em;
    }
    DIV.table_spacer {
        height: 2em;
    }
  DIV.footer {
    padding-top: 1em;
    font-weight: bold;
  }
  .method_set_header {
    padding-left: 0.5em;
    padding-right: 0.5em;
    font-size: 1.4em;
    font-weight: bold;
  }
  .method_header TH {
    background: #CCFF00 none repeat scroll 0 0;
    border-bottom: 3px solid #333;
    color: #669;
    font-size: 1.2em;
    font-weight: bold;
    padding: 0.6em 0.3em;
    text-align: left;
    vertical-align: middle;;
  }
    TH.method_header_left {
       text-align: right;
       padding: 0.6em 1em;
    }
  TR.method TH {
    border-bottom: 1px solid #CCC;
    color: #663;
    font-size: 84%;
    font-family: sans-serif;
    font-weight: normal;
    padding: 0.5em 1.0em;
    text-align: right;
    vertical-align: middle;
  }
  TR.method TD {
    border-bottom: 1px solid #CCC;
    font-size: 136%;
    padding-bottom: 0.2em;
    padding-left: 0.3em;
    padding-top: 0.2em;
    vertical-align: middle;
  }
    DIV.hidden_form {
        display: none;
    }
    TD.form_label {
        width: 10%;
        font-size: 0.9em !important;
    }
    TD.form_submit {
        border: none !important;
    }
  </style>
</head>
<body>
<h1>Local Distribution Service REST Documentation</h1>

<fieldset>
  <legend class="method_set_header">Read methods</legend>
  <table class="method" cellpadding="0px" cellspacing="0px" summary="Read method for the GET /search REST endpoint, Name of the attribute followed by the value">
    <thead>
      <tr class="method_header">
        <th width="20%" scope="col" class="method_header_left">NAME</th>
        <th scope="col">VALUE and NOTES</th>
      </tr>
    </thead>
    <tbody>
      <tr class="method">
          <th scope="row">None</th>
          <td><tt></tt></td>
      </tr>
    </tbody>
  </table>

</fieldset>

<fieldset>
  <legend class="method_set_header">Write methods</legend>
    <table class="method" cellpadding="0px" cellspacing="0px" summary="Write method for the PUT /{id}/{type} REST endpoint, Name of the attribute followed by the value">
        <thead>
            <tr class="method_header">
                <th width="20%" scope="col" class="method_header_left">NAME</th>
                <th scope="col">VALUE and NOTES</th>
            </tr>
        </thead>
        <tbody>
            <tr class="method">
                <th scope="row">Method / Path:</th>
                <td><tt>POST /</tt></td>
            </tr>
            <tr class="method">
                <th scope="row">Description:</th>
                <td>Distribute a media package</td>
            </tr>
            <tr class="method">
                <th scope="row">Required (path) parameters:</th>
                <td>
                    <em>NONE</em>
                </td>
            </tr>
            <tr class="method">
                <th scope="row">Required (form) parameters:</th>
                <td>
                  Media package, Element IDs
                </td>
            </tr>
            <tr class="method">
                <th scope="row">Optional parameters:</th>
                <td>
                    <em>NONE</em>
                </td>
            </tr>
            <tr class="method">
                <th scope="row">Response formats:</th>
                <td>
                    <em><a href="http://www.w3.org/XML/">xml</a></em>
                </td>
            </tr>
            <tr class="method">
                <th scope="row">Status codes:</th>
                <td>
                    200: OK, result info in body
                    <br />
                    400: Bad Request, data was not added, error message
                </td>
            </tr>
            <tr class="method">
                <th scope="row">Notes:</th>
                <td></td>
            </tr>

            <tr class="method">
                <th scope="row">Testing:</th>
                <td>
                    <a href="#" class="form_link">Testing form</a>
                    <div class="hidden_form">
                        <form action="/distribution/local/rest/" method="post">
                            <table class="testing" cellpadding="0" cellspacing="0">
                              <tr class="form_field">
                                  <td class="form_label">
                                     <label for="mediapackage">Media Package:</label>
                                  </td>
                                  <td>
                                     <textarea id="mediapackage" name="mediapackage" rows="15" cols="80">
<mediapackage id="10.0000/1" start="2007-12-05T13:40:00" duration="1004400000">
  <media>
    <track id="track-1" type="presentation/source">
      <mimetype>video/quicktime</mimetype>
      <url>@SAMPLES_URL@/media.mov</url>
      <checksum type="md5">43b7d843b02c4a429b2f547a4f230d31</checksum>
      <duration>1004400000</duration>
      <video>
        <device type="UFG03" version="30112007" vendor="Unigraf" />
        <encoder type="H.264" version="7.4" vendor="Apple Inc" />
        <resolution>640x480</resolution>
        <scanType type="progressive" />
        <bitrate>540520</bitrate>
        <frameRate>2</frameRate>
      </video>
    </track>
  </media>
  <metadata>
    <catalog id="catalog-1" type="metadata/dublincore">
      <mimetype>text/xml</mimetype>
      <url>@SAMPLES_URL@/dc-1.xml</url>
      <checksum type="md5">20e466615251074e127a1627fd0dae3e</checksum>
    </catalog>
  </metadata>
</mediapackage>
                                     </textarea>
                                  </td>
                              </tr>
                              <tr class="form_field">
                                  <td class="form_label">
                                     <label for="elementId">element IDs:</label>
                                  </td>
                                  <td>
                                     <input id="elementId" name="elementId" type="text" value="track-1" />
                                     <input id="elementId" name="elementId" type="text" value="catalog-1" />
                                     <input id="elementId" name="elementId" type="text" value="" />
                                     <input id="elementId" name="elementId" type="text" value="" />
                                  </td>
                              </tr>
                              <tr>
                                  <td colspan="2">
                                      <div class="form_submit">
                                     <input type="submit" value="SUBMIT" />
                                     <input type="button" value="CANCEL" />
                                    </div>
                                  </td>
                              </tr>
                            </table>
                        </form>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</fieldset>

<fieldset>
  <legend class="method_set_header">General Notes</legend>
  <ul>
        <li>All paths above are relative to the REST endpoint base (something like http://your.server/distribution/local/rest)</li>
    <li>If the service is down or not working it will return a status 503, 
    this means the the underlying service is not working and is either restarting or has failed</li>
    <li>A status code 500 means a general failure has occurred which is not recoverable 
    and was not anticipated. In other words, there is a bug! You should file an error report with
    your server logs from the time when the error occurred: 
    <a href="https://issues.opencastproject.org">Opencast Issue Tracker</a></li>
  </ul>
</fieldset>

<div class="footer">
    Service of <a href="http://www.opencastproject.org/" title="Opencast Project">Opencast</a> 
    <a href="http://www.opencastproject.org/project/matterhorn" title="Opencast Matterhorn">Matterhorn</a>
</div>

<!-- JAVASCRIPT below here -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript">
(function($) {
    $("a.form_link").click(
        function() {
            var $this = $(this);
            var $form = $this.parent().find("div.hidden_form");
            $form.toggle(400);
            $this.parent().find("div.form_submit input").click(
              function() {
                $form.hide(200);
                $this.show();
              }
            );
            $this.hide();
            return false;
        }
    );
}(jQuery));
</script>

</body>
</html>
