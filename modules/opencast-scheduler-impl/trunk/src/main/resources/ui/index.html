<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Scheduler UI</title>
    
    <!-- style -->
    <link rel="stylesheet" type="text/css" href="css/fss-reset.css" />
    <link rel="stylesheet" type="text/css" href="css/fss-layout.css" />
    <link rel="stylesheet" type="text/css" href="css/fss-theme-coal.css" />
    
    <link rel="stylesheet" type="text/css" href="css/scheduler.css" />
    <link rel="stylesheet" type="text/css" href="css/popuphelp.css" />
    <link rel="stylesheet" type="text/css" href="css/smoothness/jquery-ui-1.7.2.custom.css" />
    
    <!-- scripts -->
    <script type="text/javascript" src="js/InfusionAll.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.7.2.custom.min.js"></script>
    <script type="text/javascript" src="js/popuphelp.js"></script>
    <script type="text/javascript" src="js/scheduler.helptexts.json"></script>
    <script type="text/javascript" src="js/scheduler.js"></script>
    <script type="text/javascript" src="js/scheduler.ui.js"></script>
    <script type="text/javascript">
      function initPage() {
        $('#startDate').datepicker({showOn: 'button', buttonImage: 'img/calendar.gif', buttonImageOnly: true});
        $('#startDate').datepicker('setDate', new Date());
        
        $('.required > label').prepend('<span style="color: red; font-size: 1.4em;">*</span>');
        
        $('.folder-head').click(
                                function(){
                                $(this).children('.fl-icon').toggleClass('icon-arrow-right');
                                $(this).children('.fl-icon').toggleClass('icon-arrow-down');
                                $(this).next().toggle('fast');
                                return false;
                                }
                                );
        
        /**
         *  eventFields is an array of EventFields and EventFieldGroups, keyed on <item>'s key attribute described in scheduler
         *  service contract for the addEvent rest endpoint.
         *  @see https://wiki.opencastproject.org/confluence/display/open/Scheduler+Service
         */
        
        var eventFields = {
          "title":       new EventField('title', true),
          "creator":     new EventField('creator'),
          "contributor": new EventField('contributor'),
          "series-id":   new EventField('series'),
          "subject":     new EventField('subject'),
          "language":    new EventField('language'),
          "abstract":    new EventField('description'),
          "channel-id":  new EventFieldGroup(new Array('distMatterhornMM'), true),
          "license":     new EventField('license'),
          "startdate":   new EventFieldGroup(new Array('startDate', 'startTimeHour', 'startTimeMin', 'startTimePeriod'), true, getStartDate, setStartDate, checkStartDate),
          "enddate":     new EventFieldGroup(new Array('durationHour', 'durationMin'), true, getDuration, setDuration, checkDuration), //returns a date incremented by duration.
          "resources":   new EventFieldGroup(new Array('audio','audioVideo','audioScreen', 'audioVideoScreen'), true),
          "attendees":   new EventField('location'),
          "device-id":   new EventField('location', true)
        };
        
        eventsManager = new EventManager(eventFields);
        
        $('.icon-help').click(
                              function(event) {
                              popupHelp.displayHelp($(this), event);
                              return false;
                              }
                              );
        
        $('body').click(
                        function() {
                        if ($('#helpbox').css('display') != 'none') {
                        popupHelp.resetHelp();
                        }
                        return true;
                        }
                        );
      }
      
      $(document).ready(initPage);
      
      xmlString = '<scheduler-event><event-id>19970901T130000Z-123401@host.com</event-id><metadata><item key="title"><value>Title of my recording</value></item><item key="startdate"><value>1259856000</value></item><item key="enddate"><value>1259859600</value></item><item key="creator"><value>Name of the lecturer</value></item><item key="abstract"><value>A short description of the content of the lecture</value></item><item key="contributor"><value>ID or descriptions of the instution</value></item><item key="series-id"><value>19960401-080045-4000F192713-0052@host1.com</value></item><item key="device"><value>recorder-MH1234</value></item><item key="channel-id"><value>1</value></item><item key="location"><value>MH 1234g</value></item></metadata><resources>vga, 4M</resources><resources>lecturer, 800K, 320x240</resources><resources>board, 1M, 1280x720</resources><resources>audio, 320k, 44kHz</resources><attendees>recorder-MH1234</attendees></scheduler-event>';
        parser=new DOMParser();
        xmlDoc=parser.parseFromString(xmlString,"text/xml");
        console.log(xmlDoc);
      </script>
  </head>
  <body>
    <!-- fl-centered doesn't work in winXP-IE8 -->
    <div class="fl-container-flex fl-theme-coal">
      <ul class="fl-tabs fl-tabs-left">
        <li class="fl-activeTab"><a href="../../admin/ui/recordings_upcoming.html">Recordings</a></li>
        <li class=""><a href="../../admin/ui/agents_status.html">Capture Agents</a></li>
      </ul>
      <div id="stage" class="fl-tab-content wu-tab-content fl-fix" style="background:white;">
        <div class="fl-container-800">
          <center><h2>Schedule Recording</h2></center>
        </div>
        <!-- missing fields notification -->
        <div class="fl-container-600" id="missingFields-container" style="display:none;">
          <div class="fl-widget">
            <div class="fl-widget-titlebar warnbox-title">
              <b class="formbox-header-text" style="color:white;">Missing Inputs</b>
            </div>
            <div class="fl-widget-content warnbox-content">
              <ul>
                <li id="missing-title" class="missing-fields-item">
                  <span class="fl-icon inline-icon icon-bullet"></span>Please <a href="javascript:$('#title')[0].focus();">enter a title</a> for the recording.
                </li>
                <li id="missing-distibution" class="missing-fields-item">
                  <span class="fl-icon inline-icon icon-bullet" title=""></span>Please choose at least one <a href="javascript:document.getElementById('distITunesU').focus();">distribution channel</a>.
                </li>
                <li id="missing-startdate" class="missing-fields-item">
                  <span class="fl-icon inline-icon icon-bullet" title=""></span>Please choose a starting date for the recording.
                </li>
              </ul>
            </div>
          </div>
        </div>
        
        <!-- Common Scheduling Information -->
        <div class="fl-container-600">
          <div class="fl-widget">
            <div class="fl-widget-content form-box-container">
              <form action="">
                <ul class="fl-controls-right form-list">
                  <li class="required">
                    <label class="fl-label" for="title" id="label-title">Title:</label>
                    <input type="text" class="form-field" name="title" id="title" />
                    <span class="fl-icon icon-help"  id="help_title" />
                  </li>
                  <li>
                    <label class="fl-label" for="creator" id="label-creator">Presenter:</label>
                    <input type="text" class="form-field" name="creator" id="creator" />
                    <span class="fl-icon icon-help"  id="help_presenter" />
                  </li>
                  <li>
                    <label class="fl-label" for="contributor" id="label-contributor">Sponsoring Department:</label>
                    <input type="text" class="form-field" name="contributor" id="contributor" />
                    <span class="fl-icon icon-help"  id="help_contributor" />
                  </li>
                </ul>
              </form>
            </div>
          </div>
        </div>
        
        <!-- Optional Information -->
        <div class="fl-container-600">
          <div class="fl-widget">
            <div class="fl-widget-titlebar folder-head">
              <span class="fl-icon icon-arrow-right folder-icon">Additional Content</span>
              <b style="verticle-align: middle;">Additional Description</b>
            </div>
            <div class="fl-widget-content folder-content">
              <form action="">
                <ul class="fl-controls-right form-list">
                  <li class="additionalMeta">
                    <label class="fl-label" for="series"  id="label-series">Series:</label>
                    <input type="text" class="form-field" name="series" id="series" />
                    <span class="fl-icon icon-help"  id="help_series" />
                  </li>
                  <li class="additionalMeta">
                    <label class="fl-label" for="subject" id="label-subject">Subject:</label>
                    <input type="text" class="form-field" name="subject" id="subject" />
                    <span class="fl-icon icon-help"  id="help_subject" />
                  </li>
                  <li class="additionalMeta">
                    <label class="fl-label" for="language" id="label-language">Language:</label>
                    <input type="text" class="form-field" name="language" id="language" />
                    <span class="fl-icon icon-help"  id="help_language" />
                  </li>
                  <li class="additionalMeta">
                    <label class="fl-label" for="description" id="label-description">Description:</label>
                    <textarea name="description" id="description" class="form-field" cols="50" rows="10"></textarea>
                    <span class="fl-icon icon-help"  id="help_description" />
                  </li>
                </ul>
              </form>
            </div>
          </div>
        </div>
        
        <!-- Distribution and Licensing -->
        <div class="fl-container-600">
          <div class="fl-widget">
            <div class="fl-widget-titlebar form-box-title"><b>Distribution</b></div>
            <div class="fl-widget-content form-box-container">
              <form action="">
                <ul class="fl-controls-right form-list">
                  <li class="required">
                    <label class="fl-label form-box-label" id="label-distribution">Distribution Channel(s):</label>
                    <div style="float: left;">
                      <ul class="form-box-group">
                        <li class="column1">
                          <input type="checkbox" id="distMatterhornMM" value="Matterhorn Media Channel" checked="checked" disabled="disabled" />
                          <label for="distMatterhornMM">Matterhorn Media Module</label>
                        </li>
                        <!--
                         <li class="column1">
                         <input type="checkbox" id="distITunesU" value="1" disabled="disabled" />
                         <label for="distITunesU" class="disable-label">iTunesU</label>
                         </li>
                         <li class="column2 reset">
                         <input type="checkbox" id="distYouTube" value="3" disabled="disabled" />
                         <label for="distYouTube" class="disable-label">YouTube</label>
                         </li>
                         <li class="column2">
                         <input type="checkbox" id="distSakai" value="4" disabled="disabled" />
                         <label for="distSakai" class="disable-label">Sakai</label>
                         </li>
                         -->
                      </ul>
                    </div>
                    <span class="fl-icon icon-help" id="help_distribution" />
                  </li>
                  <li style="clear:both">
                    <label class="fl-label" for="license"  id="label-license">License:</label>
                    <input type="text" name="license" id="license" class="form-field" />
                    <span class="fl-icon icon-help" id="help_license" />
                  </li>
                </ul>
              </form>
            </div>
          </div>
        </div>
        
        <!-- Scheduling Specifics -->
        <div class="fl-container-600">
          <div class="fl-widget">
            <div class="fl-widget-titlebar form-box-title"><b>Capture</b></div>
            <div class="fl-widget-content form-box-container">
              <form action="">
                <ul class="fl-controls-right form-list">
                  <li class="required">
                    <label class="fl-label form-box-label" id="label-stardate">Recording Start Time:</label>
                    <div style="float: left;">
                      <table>
                        <tr>
                          <td id="label-startdate">Date:</td>
                          <td><input type="text" size="10" name="startDate" id="startDate" /></td>
                        </tr>
                        <tr>
                          <td>Time:</td>
                          <td> 
                            <select id="startTimeHour">
                              <option>1</option>
                              <option>2</option>
                              <option>3</option>
                              <option>4</option>
                              <option>5</option>
                              <option>6</option>
                              <option>7</option>
                              <option>8</option>
                              <option>9</option>
                              <option>10</option>
                              <option>11</option>
                              <option>12</option>
                            </select>
                            <select id="startTimeMin">
                              <option>00</option>
                              <option>05</option>
                              <option>15</option>
                              <option>20</option>
                              <option>25</option>
                              <option>30</option>
                              <option>35</option>
                              <option>40</option>
                              <option>45</option>
                              <option>50</option>
                              <option>55</option>
                            </select>
                            <select id="startTimePeriod">
                              <option>am</option>
                              <option>pm</option>
                            </select>
                          </td>
                        </tr>
                        <tr>
                          <td>Duration:</td>
                          <td>
                            hours
                            <select id="durationHour">
                              <option>0</option>
                              <option>1</option>
                              <option>2</option>
                              <option>3</option>
                              <option>4</option>
                              <option>5</option>
                              <option>6</option>
                              <option>7</option>
                              <option>8</option>
                              <option>9</option>
                              <option>10</option>
                              <option>11</option>
                              <option>12</option>
                            </select>
                            minutes
                            <select id="durationMin">
                              <option>00</option>
                              <option>05</option>
                              <option>15</option>
                              <option>20</option>
                              <option>25</option>
                              <option>30</option>
                              <option>35</option>
                              <option>40</option>
                              <option>45</option>
                              <option>50</option>
                              <option>55</option>
                            </select>
                          </td>
                        </tr>
                      </table>
                    </div>
                    <span class="fl-icon icon-help" id="help_recording" />
                  </li>
                  <li class="required" style="clear: both;">
                    <label class="fl-label"  id="label-agent">Capture Agent:</label>
                    <div>
                      <select id="location" name="location">
                        <option value="agentid12345"></option>
                      </select>
                      <span class="fl-icon icon-help"  id="help_agent" />
                    </div>
                  </li>
                  <li class="required">
                    <label class="fl-label" id="label-input">Input(s):</label>
                    <div class="form-radio-group" style="float: left;">
                      <input type="radio" id="audio" name="inputs" value="1" checked="checked" />
                      <label for="audio">Audio Only</label>
                      <input type="radio" id="audioVideo" name="inputs" value="3" />
                      <label for="audioVideo">Audio,Video</label>
                      <input type="radio" id="audioScreen" name="inputs" value="5" />
                      <label for="audioScreen">Audio,Screen</label>
                      <input type="radio" id="audioVideoScreen" name="inputs" value="7" />
                      <label for="audioVideoScreen">Audio,Video,Screen</label>
                    </div>
                    <span class="fl-icon icon-help" id="help_input" />
                    <br />
                  </li>
                </ul>
              </form>
            </div>
          </div>
        </div>
        
        <form action="">
          <table>
            <tr>
              <td>
                <input type="button" value="submit" onclick="doSubmit()" />
                <input type="reset" value="reset" onclick="schedulerUI.clearForm()" />
                <span style="color: red; font-size: 1.4em;">*</span> Required
              </td>
            </tr>
          </table>
        </form>
      </div>
      
      <!-- template for the popup help box -->
      <div id="helpBox" class="helpbox" style="display:none;">
        <img src="img/lightbulb.png" alt="help" />
        <div id="helpTitle" style="display:inline;font-weight:bold; margin-left:10px;"></div>
        <div id="helpText" style="padding-left:7px; padding-right:7px; white-space:normal;" />
      </div>
    </div>
  </body>
</html>