<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
    <head>
        <title>Upcoming Recordings</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <!-- styles -->
        <link href="infusion-1.1.2/fss/css/fss-reset.css" rel="stylesheet" type="text/css" />
        <link href="infusion-1.1.2/fss/css/fss-layout.css" rel="stylesheet" type="text/css" />
        <link href="infusion-1.1.2/fss/css/fss-text.css" rel="stylesheet" type="text/css" />
        <link href="infusion-1.1.2/fss/css/fss-theme-coal.css" rel="stylesheet" type="text/css" />
        <link href="css/admin.css" rel="stylesheet" type="text/css" />

        <!-- scripts -->
        <script type="text/javascript" src="infusion-1.1.2/InfusionAll.js"></script>
        <script type="text/javascript" src="js/jquery.tablesorter.min.js"></script>
        <script type="text/javascript" src="js/jquery.xslt.js"></script>
        <script type="text/javascript" src="js/admin.js"></script>
        <script type="text/javascript">

            $(document).ready( function() {
               AdminUI.init();
               $('#recordings-table-container').xslt("../../scheduler/rest/getUpcommingEvents", "xsl/recordings_upcoming.xsl", function() {
                   // run through the timestamps and make them string representations
                   $('#recordings-table-container').find('.td-TimeDate').each( function() {
                       var start, end;
                       start = timestampToDate($(this).children('.date-start').text());
                       end   = timestampToDate($(this).children('.date-end').text());
                       $(this).children('.date-start').text( start.getFullYear() + '/' + makeTwoDigits(start.getMonth()) + '/' + makeTwoDigits(start.getDate()) + ' ' + makeTwoDigits(start.getHours()) + ':' + makeTwoDigits(start.getMinutes()) );
                       $(this).children('.date-end').text( makeTwoDigits(end.getHours()) + ':' + makeTwoDigits(end.getMinutes()) );
                   })
               });
            });

            function timestampToDate(timestamp) {
                var date = new Date();
                date.setTime(timestamp);
                return date;
            }

            function makeTwoDigits(number) {
                if (number < 10) {
                    return '0' + number;
                } else {
                    return number;
                }
            }
        </script>
    </head>
    <body>
        <!-- fl-centered doesn't work in winXP-IE8 -->
        <div class="fl-container-flex fl-centered fl-theme-coal">
            <ul class="fl-tabs fl-tabs-left">
                <li class="fl-activeTab"><a href="recordings_upcoming.html">Recordings</a></li>
                <li class=""><a href="agents_status.html">Capture Agents</a></li>
            </ul>
            <div id="stage" class="fl-tab-content wu-tab-content fl-fix">
                <!-- recording state selector -->
                <div id="category-select-container">
                    <ul class="category-selector">
                        <li class="category-selector-item">
                            <span class="category-selector-item-disabled">All</span>
                        </li>
                        <li class="category-selector-spacer">
                            &#124;
                        </li>
                        <li class="category-selector-item">
                            <span>Upcoming</span>
                        </li>
                        <li class="category-selector-spacer">
                            &#124;
                        </li>
                        <li class="category-selector-item">
                            <span class="category-selector-item-disabled">Capturing</span>
                        </li>
                        <li class="category-selector-spacer">
                            &#124;
                        </li>
                        <li class="category-selector-item">
                            <a href="recordings_processing.html">Processing</a>
                        </li>
                        <li class="category-selector-spacer">
                            &#124;
                        </li>
                        <li class="category-selector-item">
                            <a href="recordings_finished.html">Finished</a>
                        </li>
                    </ul>
                </div>

                <!-- Add/Schedule Buttons -->
                <div id="add-buttons-container">
                    <button type="button" id="button_schedule">
                        <span class="icon icon-add">&nbsp;</span>
                        <span>Schedule Recording</span>
                    </button>
                    <button type="button" id="button_upload">
                        <span class="icon icon-add">&nbsp;</span>
                        <span>Upload Recording</span>
                    </button>
                </div>

                <!-- recordings table -->
                <div id="recordings-table-container" style="clear:both;">

                </div>
            </div>
        </div>
    </body>
</html>
