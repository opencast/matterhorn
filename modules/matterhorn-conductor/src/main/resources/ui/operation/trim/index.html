<html>
  <head>
    <title>Hold for review</title>
    <link rel="stylesheet" type="text/css" href="/admin/css/jquery-ui-1.8.6.custom.css" />
    <link rel="stylesheet" type="text/css" href="/admin/css/jquery-ui-opencast-admin/jquery-ui-opencast-admin.css" />
    <link rel="stylesheet" type="text/css" href="/admin/css/admin.css">
    <style type="text/css">
      #player-container {
        clear: both;
        border: none;
        width: 90%;
        height: 300px;
      }

      .hidden {
        display: none;
      }

      input.pointInput {
        width: 60px;
        border: 0px solid white;
      }

      #actions {
        margin: 0 auto;
        margin-top:16px;
        text-align: center;
        width: 100%;
      }

      a.secondaryButton, a.secondaryButton:link, a.secondaryButton:visited {
        margin-right: 16px;
        cursor: pointer;
        color: #2d8f8b;
      }

      a.secondaryButton:hover, a.secondaryButton:focus {
        color: #2d8f8b;
        text-decoration: underline;
      }

      #metadata-container {
        margin-bottom: 8px;
      }

      .formField-list label {
        width: 30%;
        float: left;
        text-align: right;
        margin-right: 5px;
      }
    </style>

    <script type="text/javascript" src="/admin/jquery/jquery-1.4.4.min.js"></script>
    <script type="text/javascript" src="/admin/jquery/jquery-ui-1.8.9.custom.min.js"></script>
    <script type="text/javascript" src="/admin/js/oc.utils.js"></script>
    <script type="text/javascript">
            
      var PLAYER_URL = '/admin/embed.html';
            
      var postData = {
        'id': parent.document.getElementById("holdWorkflowId").value
      };

      var catalogUrl = '';
      var mediapackage = null;
      var DCmetadata = null;
      var metadataChanged = false;

      var inpoint = 0;
      var outpoint = 0;
            
      // Variables for the "In point"- and "Out point"- increase-/decrease-Buttons
      var secondsForward = 1;
      var secondsBackward = 1;
            
      var intervalTimer = 0;
      // Timeout of the Intervall Timer
      var timerTimeout = 1500;
      var timerSet = false; // -> temporary solution. clearInterval(timer) does not work properly
      $(document).ready(function(){
        var id = postData.id;

        $('.oc-ui-form-field').change(function() {
          metadataChanged = true;
        });
                
        // Set default Values for In point and Out point
        $('#player-container').load(function(){
          $('#inPoint').val("00:00:00");
          // Set a Timer for the while-Loop
          this.intervalTimer = window.setInterval(function(){
            // Ask if a default Out Point has been set
            if (setOutPointDefaultValue()) {
              // Clear the Intervall
              window.clearInterval(this.intervalTimer);
            }
          }, timerTimeout);
        });
                
        /**
         * Tries to set the default Out point value
         */
        function setOutPointDefaultValue(){
          // If Duration has been set
          if ($('#player-container')[0].contentWindow.Opencast != null &&
            ($('#player-container')[0].contentWindow.Opencast.Player.getDuration() != 0) &&
            !timerSet &&
            ($('#player-container')[0].contentWindow.Opencast.Player.getDuration() != -1) &&
            $('#player-container').contents().find('#oc_duration').text() != 'Initializing') {
            $('#outPoint').val($('#player-container').contents().find('#oc_duration').text());
            timerSet = true;
            return true;
          }
                    
          return false;
        }
                
        //create Buttons
        $('.ui-button').button();
                
        //hide some stuff we don't want to see
        window.parent.$('.paging-nav-container').hide(0);
        $('#trimming-hint').toggle();
                
        window.parent.$('.recordings-button-container').hide(0);
        window.parent.$('.recordings-categories').hide(0);
        window.parent.$('input#filter').parent().hide(0);
                
        // Event edit link clicked
        $('#edit-link').click(function(){
          //parent.Recordings.retryRecording(id);
          parent.location.href = "/admin/upload.html?retry=" + id;
          return false;
        });
                
        // Event set inpoint clicked
        $('#set-trimin').click(function(){
          $('#inPoint').val($('#player-container')[0].contentWindow.Opencast.Player.getCurrentTime());
          checkInOutPoint();
        });
                
        //Event set outpoint clicked
        $('#set-trimout').click(function(){
          $('#outPoint').val($('#player-container')[0].contentWindow.Opencast.Player.getCurrentTime());
          checkInOutPoint();
        });
                
        //Event forward one second (inpoint)
        $('#step-in-forward').click(function(){
          in_de_creaseObject($('#inPoint'), secondsForward);
          checkInOutPoint();
        });
                
        //Event backward one second (inpoint)
        $('#step-in-backward').click(function(){
          in_de_creaseObject($('#inPoint'), -secondsForward);
          checkInOutPoint();
        });
                
        //Event forward one second (outpoint)
        $('#step-out-forward').click(function(){
          in_de_creaseObject($('#outPoint'), secondsBackward);
          checkInOutPoint();
        });
                
        //Event backward one second (outpoint)
        $('#step-out-backward').click(function(){
          in_de_creaseObject($('#outPoint'), -secondsBackward);
          checkInOutPoint();
        });
                
        /**
         * Checks if In point is bigger than Out point and prints an Error Message if this is the case
         */
        function checkInOutPoint(){
          // Check if Out point is larger than the Video Duration
          if (getTimeInMilliseconds($('#outPoint').val()) > getTimeInMilliseconds($('#player-container').contents().find('#oc_duration').text())) {
            $('#outPoint').val($('#player-container').contents().find('#oc_duration').text());
          }
          // Check if In point is larger than the Video Duration
          if (getTimeInMilliseconds($('#inPoint').val()) > getTimeInMilliseconds($('#player-container').contents().find('#oc_duration').text())) {
            $('#inPoint').val($('#player-container').contents().find('#oc_duration').text());
          }
          if (getTimeInMilliseconds($('#inPoint').val()) >= getTimeInMilliseconds($('#outPoint').val())) {
            $('div#errorMessage').html("Out point must be later than In point");
            $('#trimming-hint').hide();
            $('div#errorMessage').show();
          }
          else {
            $('div#errorMessage').hide();
            $('#trimming-hint').show();
          }
        }
                
        function setValue(input, value){
          $('#' + input).val(value);
        }
                
        //start playing from current in point
        $('#play-from-in').click(function(){
          var videodisplay = $('#player-container')[0].contentWindow.Videodisplay;
          videodisplay.pause();
          var seekTime = getTimeInMilliseconds($('#inPoint').val());
          videodisplay.seek(seekTime / 1000);
          window.setTimeout(function(){
            videodisplay.play();
          }, 800);
        });
                
        //play last 10 seconds to out
        $('#play-to-out').click(function(){
          var videodisplay = $('#player-container')[0].contentWindow.Videodisplay;
          videodisplay.pause();
          var seekTime = getTimeInMilliseconds($('#outPoint').val()) / 1000;
          var timeOut = 10000;
          // If Out point < 10 Seconds
          if ((seekTime - 10) <= 0) {
            videodisplay.seek(0);
            timeOut = seekTime * 1000;
          }
          else {
            videodisplay.seek(seekTime - 10);
          }
          window.setTimeout(function(){
            videodisplay.play();
            window.setTimeout(function(){
              videodisplay.pause();
            }, timeOut);
                        
          }, 800);
        });
                
        // load preview player and metadata
        $.ajax({
          url: '/workflow/instance/' + id + '.xml',
          dataType: 'xml', // or XML..
          success: function(data){

            // clone mediapackage for editing
            mediapackage = ocUtils.createDoc('mediapackage', '');
            var clone = $(data.documentElement).find("mediapackage").clone();
            $(clone).children().appendTo($(mediapackage.documentElement));
            $(mediapackage.documentElement).attr('id',$(clone).attr('id'));
            $(mediapackage.documentElement).attr('start',$(clone).attr('start'));
            $(mediapackage.documentElement).attr('duration',$(clone).attr('duration'));

            // load metadata from DC xml for editing
            catalogUrl = $(data.documentElement).find("mediapackage > metadata > catalog[type='dublincore/episode'] > url").text();
            $.ajax({
              url: catalogUrl,
              dataType: 'xml',
              error: function(XMLHttpRequest, textStatus, errorThrown){
                $('div#errorMessage').html('error: ' + textStatus);
              },
              success: function(data){
                DCmetadata = data;
                $(data.documentElement).children().each(function(index, elm){
                  var tagName = elm.tagName.split(/:/)[1];
                  if ($(elm).text() != '') {
                    $('#meta-' + tagName).val($(elm).text());
                  }
                });
                parent.ocRecordings.adjustHoldActionPanelHeight();
              }
            });
            // get neccessary data to call the preview player
            //var previewTag = $(data.documentElement).find("mediapackage > media > track > tags > tag:contains('engage')").first();
            /*if (previewTag != null) {
                     var videoUrl = $(previewTag).parent().parent().find('url').text();
                     //alert("videoUrl: " + videoUrl);
                     //$('#video-url-container').attr('href',videoUrl).text(videoUrl);
                     var url = '/admin/embed.html?videoUrl=' + videoUrl;
                     $('#player-container').attr('src', url);
                     } else {
                     $('#player-container').text('No preview encoded track found in MediaPackage');
                     }*/
            var previewFiles = new Array();
                        
            $(data.documentElement).find("mediapackage > media > track").each(function(index, elm){
              if ($(elm).attr('type').split(/\//)[1] == 'preview') {
                previewFiles.push($(elm).find('url').text());
              }
            });
            if (previewFiles.length > 0) {
              var url = PLAYER_URL + '?';
              for (var i = 0; i < previewFiles.length; i++) {
                if (i == 0) {
                  url += 'videoUrl=';
                }
                else {
                  url += '&videoUrl' + (i + 1) + '=';
                }
                url += previewFiles[i];
              }
              $('#player-container').attr('src', url);
            }
            else {
              $('#player-container').text("No preview media files found for this media package.");
            }
            // show links to source media
            var singleFile = true;
            $(data.documentElement).find("mediapackage > media > track").each(function(index, elm){
              if ($(elm).attr('type').split(/\//)[1] == 'source') {
                var link = document.createElement('a');
                var url = $(elm).find('url').text();
                $(link).attr('href', url);
                var filename = url.split(/\//);
                $(link).text(filename[filename.length - 1]).attr('title', 'Download ' + filename[filename.length - 1] + ' for editing');
                if (singleFile) {
                  singleFile = false;
                }
                else {
                  $('#files').append($(document.createElement('span')).text(', '));
                }
                $('#files').append(link);
              }
            });
          }
        });

        // Event: collapsable title clicked, de-/collapse collapsables
        $('.collapse-control2').click(function() {
          $('#ui-icon').toggleClass('ui-icon-triangle-1-e');
          $('#ui-icon').toggleClass('ui-icon-triangle-1-s');
          $(this).next('.collapsable').toggle();
          parent.ocRecordings.adjustHoldActionPanelHeight();
        });

        $('#series').autocomplete({
          source: '/series/search',
          select: function(event, ui){
            $('#ispartof').val(ui.item.id);
          },
          search: function(){
            $('#ispartof').val('');
          }
        });

        parent.ocRecordings.adjustHoldActionPanelHeight();
      });
            
      /**
       * Returns the Input Time in Milliseconds
       * @param data Data in the Format ab:cd:ef
       * @return Time from the Data in Milliseconds
       */
      function getTimeInMilliseconds(data){
        var values = data.split(':');
                
        // If the Format is correct
        if (values.length == 3) {
          // Try to convert to Numbers
          var val0 = values[0] * 1;
          var val1 = values[1] * 1;
          var val2 = values[2] * 1;
          // Check and parse the Seconds
          if (!isNaN(val0) && !isNaN(val1) && !isNaN(val2)) {
            // Convert Hours, Minutes and Seconds to Milliseconds
            val0 *= 60 * 60 * 1000; // 1 Hour = 60 Minutes = 60 * 60 Seconds = 60 * 60 * 1000 Milliseconds
            val1 *= 60 * 1000; // 1 Minute = 60 Seconds = 60 * 1000 Milliseconds
            val2 *= 1000; // 1 Second = 1000 Milliseconds
            // Add the Milliseconds and return it
            return val0 + val1 + val2;
          }
          else {
            return 0;
          }
        }
        else {
          return 0;
        }
      }
            
      /**
       * Increases or decreases the current In point by val
       * @param obj Object with Function .val()
       * @param val Value in Seconds to increase (val > 0) or decrease (val < 0), val < 20 Seconds
       */
      function in_de_creaseObject(obj, val){
        if ((val != 0) && (Math.abs(val < 20))) {
          // Get current In point data
          var data = obj.val();
          // If data contains something
          if (data != '') {
            var values = data.split(':');
            if (values.length == 3) {
              // Try to convert to Numbers
              var val0 = values[0] * 1;
              var val1 = values[1] * 1;
              var val2 = values[2] * 1;
              // Check and parse the Seconds
              if (!isNaN(val0) && !isNaN(val1) && !isNaN(val2)) {
                // Increase
                if ((val > 0) && ((val0 >= 0) || (val1 >= 0) || (val2 >= 0))) {
                  // If >= 59 Seconds
                  if ((val2 + val) > 59) {
                    // If >= 59 Minutes
                    if ((val1 + 1) > 59) {
                      // Increase Hours and set Minutes and Seconds to 0
                      obj.val(getTimeString(val0 + 1, 0, Math.abs(val - (60 - val2))));
                    }
                    else {
                      // Increase Minutes and set Seconds to the Difference
                      obj.val(getTimeString(val0, val1 + 1, Math.abs(val - (60 - val2))));
                    }
                  }
                  else {
                    // Increase Seconds
                    obj.val(getTimeString(val0, val1, val2 + val));
                  }
                }
                // Decrease
                else
                  if ((val0 > 0) || (val1 > 0) || (val2 > 0)) {
                    // If <= 0 Seconds
                    if ((val2 + val) < 0) {
                      // If <= 0 Minutes
                      if ((val1 - 1) < 0) {
                        // Decrease Hours and set Minutes and Seconds to 0
                        obj.val(getTimeString(val0 - 1, 59, 60 - Math.abs(60 - Math.abs(val - (60 - val2)))));
                      }
                      else {
                        // Decrease Minutes and set Seconds to 0
                        obj.val(getTimeString(val0, val1 - 1, 60 - Math.abs(60 - Math.abs(val - (60 - val2)))));
                      }
                  }
                  else {
                    // Decrease Seconds
                    obj.val(getTimeString(val0, val1, val2 + val));
                  }
                }
                else {
                  obj.val("00:00:00");
                }
              }
              else {
                obj.val("00:00:00");
              }
            }
            else {
              obj.val("00:00:00");
            }
          }
        }
      }
            
      /**
       * Returns a correct formatted Time String in the Format ab:cd:ef
       * @param val0 Hours element (0, 99)
       * @param val0 Mintes element (0, 60)
       * @param val0 Seconds element (0, 60)
       * @return a correct formatted Time String in the Format ab:cd:ef
       */
      function getTimeString(val0, val1, val2){
        if ((val0 >= 0) && (val0 < 100) && (val1 >= 0) && (val1 < 60) && (val2 >= 0) && (val2 < 60)) {
          if (val0 <= 9) {
            val0 = "0" + val0.toString();
          }
          if (val1 <= 9) {
            val1 = "0" + val1.toString();
          }
          if (val2 <= 9) {
            val2 = "0" + val2.toString();
          }
          return val0 + ":" + val1 + ":" + val2;
        }
        else {
          return "00:00:00";
        }
      }
            
      /**
       * Continues the Workflow
       */
      function continueWorkflow(){
        // Get Video Duration
        var videoDurationData = $('#player-container').contents().find('#oc_duration').text();
        // Format 'Trim From'
        var trimFromData = $('#inPoint').val();
        trimFromData = ((trimFromData == '') || (trimFromData == null)) ? '00:00:00' : trimFromData;
        // Format 'Trim To'
        var trimToData = $('#outPoint').val();
        trimToData = ((trimToData == '') || (trimToData == null)) ? videoDurationData : trimToData;

        // if metadata was changed update DC catalog and mediapackage instance
        if (metadataChanged) {
          if ($('#meta-title').val()) {
            updateDCMetadata();
            updateMediapackageMetadata();
            saveDCMetadata();
          } else {
            alert("Field 'Title' must not be empty!");
            return;
          }
        }

        // If Input < Output
        if (trimFromData < trimToData) {
          var newduration = getTimeInMilliseconds(trimToData) - getTimeInMilliseconds(trimFromData);
          postData['trimin'] = getTimeInMilliseconds(trimFromData);
          //postData['trimout'] = getTimeInMilliseconds(trimToData);
          postData['newduration'] = newduration;
          if (metadataChanged) {
            var mp = ocUtils.xmlToString(mediapackage);
            mp = mp.replace(/ xmlns="http:\/\/www\.w3\.org\/1999\/xhtml"/g,'');     // no luck with $(mediapackage.documentElement).find(MPname).removeAttr('xmlns');
            parent.ocRecordings.Hold.changedMediaPackage = mp;
          }
          parent.ocRecordings.continueWorkflow(postData);
        }
        else {
          $('div#errorMessage').html("The In-Point must not be bigger than the Out-Point");
        }
      }
            
      function cancel(){
        var videodisplay = $('#player-container')[0].contentWindow.Videodisplay;
        videodisplay.pause();
        parent.ocRecordings.hideHoldActionUI();
      }

      function createSeriesFromSearchText(){
        var seriesXml = '<series><additionalMetadata><metadata><key>title</key><value>' + $('#series').val() + '</value></metadata></additionalMetadata></series>';
        var creationSucceeded = false;
        $.ajax({
          async: false,
          type: 'PUT',
          url: '/series',
          data: { series: seriesXml },
          dataType : 'json',
          success: function(data){
            creationSucceeded = true;
            $('#ispartof').val(data.series.id);
          }
        });
        return creationSucceeded;
      }

      function updateDCMetadata() {
        ocUtils.log("Updating DC metadata");
        
        $('.dcMetaField').each(function(){
          var $field = $(this);
          if ($field.val() != '') {
            var $dcelm = $(DCmetadata.documentElement).find('dcterms\\:' + $field.attr('name'));
            if ($dcelm.length != 0) {
              ocUtils.log("updating " + $field.attr('name') + " to: " + $field.val());
              $dcelm.text($field.val());
            } else {
              ocUtils.log("creating " + $field.attr('name') + " with value: " + $field.val());
              $('<dcterms:' + $field.attr('name') + '>').text($field.val()).appendTo(DCmetadata.documentElement);
            }
          }
        });
      }

      // Update the MediaPackage instances metadata fields (see org.opencastproject.mediapackage.MediaPackageImpl)
      function updateMediapackageMetadata() {
        updateMetadataField('title','title');
        updateMetadataField('language','language');
        updateMetadataField('license','license');
        updateMetadataField('subject','subject');
        updateMetadataGroupField('creator', 'creators', 'creator');
        updateMetadataGroupField('contributor', 'contributors', 'contributor');

        // update series
        if ($('#series').val() != '') {
          if ($('#ispartof').val() == '') {
            createSeriesFromSearchText();
          }
          updateMPElement('seriestitle', $('#series').val());
          updateMPElement('series', $('#ispartof').val());  
        }
      }

      function updateMPElement(MPname, value) {
        var $mpelm = $(mediapackage.documentElement).find(MPname);
        if ($mpelm.length != 0) {
          ocUtils.log('Updating ' + MPname + ' in MediaPackage to ' + value);
          $mpelm.text(value);
        } else {
          ocUtils.log('Creating ' + MPname + ' in MediaPackage with value ' + value);
          $newelm = $('<' + MPname + '/>').text(value);
          $newelm.appendTo(mediapackage.documentElement);
        }
      }

      function updateMetadataField(DCname, MPname) {
        var $dcelm = $(DCmetadata.documentElement).find('dcterms\\:' + DCname);
        if ($dcelm.length != 0) {
          updateMPElement(MPname, $dcelm.text());
        }
      }

      function updateMetadataGroupField(DCname, MPgroupname, MPname) {
        var $dcelms = $(DCmetadata.documentElement).find('dcterms\\:' + DCname);
        if ($dcelms.length != 0) {
          $parent = $(mediapackage.documentElement).find(MPgroupname);
          if ($parent.length > 0) {
            $parent.empty();
          } else {
            $parent = $('<' + MPgroupname + '/>');
            $(mediapackage.documentElement).append($parent);
          }
          $dcelms.each(function() {
            $('<' + MPname + '/>').text($(this).text()).appendTo($parent);
          });
        }
      }

      function saveDCMetadata() {
        $.ajax({
          url: catalogUrl,
          async: false,
          type: 'post',
          data: {content : ocUtils.xmlToString(DCmetadata)},
          error: function() {
            ocUtils.log('Failed to save DC metadata to ' + catalogUrl);
          },
          success: function() {
            ocUtils.log('Save DC metadata to ' + catalogUrl);
          }
        });
      }
    </script>
  </head>
  <body>
    <h1>Review/Trim Media</h1>
    <center>
      <iframe id="player-container">
      </iframe>
      <div>
      <label>
        <span id="i18n_files_label">File(s)</span>:
      </label>
      <span id="files"></span>
      </div>
    </center>

    <div class="form-box layout-centered ui-widget oc-ui-collapsible-widget" style="width:680px;">
      <div class="form-box-head ui-widget-header ui-corner-top oc-ui-cursor collapse-control2">
        <div id="additional_icon" class="ui-icon ui-icon-triangle-1-e"></div>
        <div id="i18n_additional">Edit Metadata of this Recording</div>
        <div class="clear"></div>
      </div>
      <div class="form-box-content ui-widget-content ui-corner-bottom collapsable">
        <form action="">
          <ul class="oc-ui-form-list">
            <li>
              <label class="scheduler-label" for="title" id="titleLabel" style="width:15%;"><span style="color: red;">* </span><span id="i18n_title_label">Title</span>:</label>
              <input type="text" id="meta-title" name="title" class="oc-ui-form-field requiredField dcMetaField" maxlength="255" />
            </li>
            <li>
              <label class="scheduler-label" for="creator" id="creatorLabel" style="width:15%;"><span id="i18n_presenter_label">Presenter</span>:</label>
              <input type="text" name="creator" id="meta-creator" class="oc-ui-form-field dcMetaField"  maxlength="255"/>
            </li>
            <li id="seriesContainer">
              <label class="scheduler-label" for="series" id="seriesLabel" style="width:15%;"><span id="i18n_series_label">Course/Series</span>:</label>
              <input type="text" class="oc-ui-form-field" id="series" name="series" maxlength="255">
              <input type="hidden" class="oc-ui-form-field" id="ispartof" name="ispartof">
            </li>
            <li class="additionalMeta">
              <label class="scheduler-label" for="contributor" id="contributorLabel" style="width:15%;"><span id="i18n_dept_label">Contributor</span>:</label>
              <input type="text" class="oc-ui-form-field dcMetaField" name="contributor" id="meta-contributor" maxlength="255" />
            </li>
            <li class="additionalMeta">
              <label class="scheduler-label" for="subject" id="subjectLabel" style="width:15%;"><span id="i18n_sub_label">Subject</span>:</label>
              <input type="text" class="oc-ui-form-field dcMetaField" name="subject" id="meta-subject" maxlength="255" />
            </li>
            <li class="additionalMeta">
              <label class="scheduler-label" for="language" id="languageLabel" style="width:15%;"><span id="i18n_lang_label">Language</span>:</label>
              <input type="text" class="oc-ui-form-field dcMetaField" name="language" id="meta-language" maxlength="255" />
            </li>
            <li class="additionalMeta">
              <label class="scheduler-label" for="description" id="descriptionLabel" style="width:15%;"><span id="i18n_desc_label">Description</span>:</label>
              <textarea name="description" id="meta-description" class="oc-ui-form-field dcMetaField" rows="5" cols="10"></textarea>
            </li>
          </ul>
        </form>
      </div>
    </div>

    <div id="actions"">
      <!-- control buttons -->
      <label for="inPoint" style="padding-left: 10px">
        In point
      </label>
      <input type="text" id="inPoint" readonly="readonly" class="pointInput"/><input type="button" style="width: 160px; background-color: #C7D7D7;" id="set-trimin" title="Set to current time" value="Set to current time" class="ui-button" /><input type="button" id="play-from-in" style="width: 160px; background-color: #C7D7D7;" title="Start playing at current In point" value="&gt; Play from In point" class="ui-button" /><input type="button" id="step-in-forward" style="background-color: #C7D7D7;" title="Increase In point by one second" value="&gt;&gt;" class="ui-button" /><input type="button" id="step-in-backward" style="background-color: #C7D7D7;" title="Decrease In point by one second" value="&lt;&lt;" class="ui-button" />
      <br/>
      <label for="outPoint" class="label">
        Out point
      </label>
      <input type="text" id="outPoint" readonly="readonly" class="pointInput"/><input type="button" style="width: 160px; background-color: #C7D7D7;" id="set-trimout" title="Set to current time" value="Set to current time" class="ui-button" /><input type="button" id="play-to-out" style="width: 160px; background-color: #C7D7D7;" title="Play last 10 seconds to Out point" value="&gt; Play to Out point" class="ui-button" /><input type="button" id="step-out-forward" style="background-color: #C7D7D7;" title="Increase Out point by one second" value="&gt;&gt;" class="ui-button" /><input type="button" id="step-out-backward" style="background-color: #C7D7D7;" title="Decrease Out point by one second" value="&lt;&lt;" class="ui-button" />
      <br/>
      <br/>
      <div id="errorMessage" class="error">
      </div>
      <div id="trimming-hint">
        <p style="color:green;">
          This Recording will be trimmed according to the In and Out points you have set when you continue.
        </p>
      </div>
      <input title="Start trimming this recording" style="margin-left: 65px; margin-right: 16px; width: 160px;" onclick="continueWorkflow();" id="continueBtn" type="button" class="ui-button ui-corner-all" value="Continue processing" />
      <!-- a id="edit-link" class="secondaryButton">Edit metadata, then continue</a -->
      <a onclick="cancel()" title="Cancel" class="secondaryButton">Cancel</a>
    </div>

  </body>
</html>
