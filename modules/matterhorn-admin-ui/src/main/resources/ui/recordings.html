<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>Recordings | Opencast Matterhorn</title>
    <link rel="shortcut icon" href="img/favicon.ico">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <link rel="stylesheet" type="text/css" href="css/oc.layout.css" />
    <link rel="stylesheet" type="text/css" href="css/themes/oc.default.css" />
    <link rel="stylesheet" type="text/css" href="css/pages/oc.recordings.css" />
    <link rel="stylesheet" type="text/css" href="css/jquery-ui-1.8.6.custom.css">
    <link rel="stylesheet" type="text/css" href="css/jquery-ui-opencast-admin/jquery-ui-opencast-admin.css">

    <script type="text/javascript" src="jquery/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="jquery/jquery-ui-1.8.6.custom.min.js"></script>
    <script type="text/javascript" src="trimpath/trimpath-template-1.0.38.js"></script>
    <script type="text/javascript" src="js/jquery.ui.spinner.js"></script>
    <script type="text/javascript" src="js/jquery.ui.searchbox.js"></script>
    <script type="text/javascript" src="js/oc.utils.js"></script>
    <script type="text/javascript" src="js/oc.recordings.js"></script>
    <script type="text/javascript" src="js/oc.admin.js"></script>
    <style type="text/css">
      /*html {overflow-y:scroll;}*/
      #stage {font-family:"Arial","Helvetica","Verdana","sans-serif"; font-size:10px; margin:20px; min-height:100%; padding:0 0 20px;}
      #controlsTop {padding: 10px 5px 5px 5px;}
      .state-filter-container {float:left;margin-right:30px;}
      #searchBox {width:240px;float:right;}
      #controlsFoot {padding: 5px 5px 10px 5px;}
      #configButton {float:left;}
      #pagerBottom {float:right;}
      #tableContainer {padding: 0px 5px 0px 5px;}
      #recordingsTable th {margin-left:0px; margin-right: 0px;}
      #recordingsTable .sortable {cursor:pointer;}
      #recordingsTable th .sort-icon {float:right;}
      #recordingsTable tr {border-bottom: 1px solid silver;}
      #recordingsTable tr:hover {background-color: silver;}
      #recordingsTable .foldable {cursor: pointer;}
      #recordingsTable .fold-body {display: none;}
      .status-column-error-heading {}
      .status-column-error-heading .fold-icon {float:left;}
      .status-column-error-heading .error-message {float:left;font-weight:bold;color:red;padding-top:2px;}
      .status-column-error-details {clear:both;padding-left:16px;}
      .status-column-operation-heading {}
      .status-column-operation-heading .fold-icon {float:left}
      .status-column-operation-heading .operation-heading-text {float:left;font-weight:bold;padding-top:2px;}
      .status-column-operation-details {clear:both;padding-left:16px;padding-right:16px; font-size:90%;}
      .operation-property-container {display:block; border-top: 1px solid silver;}
      .operation-property-key {font-weight: bold;margin-top:2px;}
      .configRow span {float: left;}
      .configRow div {float: right;}
      #holdActionStage {margin:20px; padding:0 0 20px;}
      #holdActionUI {border:none; width:100%;}
      #refreshControlsContainer {margin-right: 18px;}
      #controlsFoot .ui-widget {padding: 3px 5px 3px 5px;}
    </style>
    <script type="text/javascript">

    </script>
  </head>
  <body>
    <!-- VERSION AND LOGOUT BAR -->
    <div class="layout-page-header oc-ui-version-bar ui-helper-clearfix">
      <div id="currentVersion" class="layout-inline"></div>
      <div class="layout-inline layout-float-right"><a id="logout" href="/j_spring_security_logout">Log out</a></div>
    </div>
    <!-- BANNER -->
    <div class="layout-page-header">
      <div class="oc-ui-banner layout-inline">
        <div onclick="document.location='recordings.html'" class="oc-ui-cursor">
          <img src="img/MatterhornLogo.png" alt="Matterhorn Home Page" title="Matterhorn Home Page" width="104" height="72" class="layout-inline" />
          <h1 id="i18n_logo_title" class="layout-inline layout-valign-top">Admin Tools</h1>
        </div>
      </div>
      <div class="layout-page-banner layout-inline layout-float-right">
        <a href="http://www.opencastproject.org">
          <img src="img/OpencastLogo.png" width="143" height="38" alt="Opencast Community Project" title="Opencast Community Project" />
        </a>
      </div>
    </div>
    <!-- PAGE TABS -->
    <div class="layout-page-header">
      <ul class="layout-page-tabs oc-ui-page-tabs">
        <li class="oc-ui-page-tab oc-ui-page-tab-active oc-ui-cursor ui-corner-top" id="i18n_tab_recording" onclick="document.location='recordings.html'">Recordings</li>
        <li class="oc-ui-page-tab oc-ui-cursor ui-corner-top" id="i18n_tab_series" onclick="document.location='series_list.html'">Series</li>
        <li class="oc-ui-page-tab oc-ui-cursor ui-corner-top" id="i18n_tab_agent" onclick="document.location='agents_status.html'">Capture Agents</li>
        <li class="oc-ui-page-tab oc-ui-cursor ui-corner-top" id="i18n_tab_statistics" onclick="document.location='statistics.html'">Statistics</li>
      </ul>
    </div>
    <div id="stage" class="ui-widget">
      <div>
        <button id="uploadButton" type="button">Upload Recording</button>
        <button id="scheduleButton" type="button">Schedule Recording</button>
      </div>
      <!-- div id="controlsTop" class="ui-widget-header ui-corner-top ui-helper-clearfix" -->
      <div id="controlsTop" class="ui-helper-clearfix">
        <div class="state-filter-container">
          <input type="radio" name="stateSelect" value="all" id="state-all" /><label for="state-all">All<span id="stats-all"></span></label>
          <input type="radio" name="stateSelect" value="upcoming" id="state-upcoming" /><label for="state-upcoming">Upcoming<span id="stats-upcoming"></span></label>
          <input type="radio" name="stateSelect" value="capturing" id="state-capturing" /><label for="state-capturing">Capturing<span id="stats-capturing"></span></label>
          <input type="radio" name="stateSelect" value="processing" id="state-processing" /><label for="state-processing">Processing<span id="stats-processing"></span></label>
          <input type="radio" name="stateSelect" value="finished" id="state-finished" /><label for="state-finished">Finished<span id="stats-finished"></span></label>
        </div>
        <div class="state-filter-container">
          <input type="radio" name="stateSelect" value="hold" id="state-hold" /><label for="state-hold">On Hold<span id="stats-hold"></span></label>
          <input type="radio" name="stateSelect" value="failed" id="state-failed" /><label for="state-failed">Failed<span id="stats-failed"></span></label>
        </div>
        <div id="searchBox"></div>
      </div>
      <!-- BULK ACTION PANEL -->
      <div class="layout-page-header recordings-bulk-action ui-corner-all layout-centered" id="bulkActionPanel">
        <div class="ui-widget layout-centered">
          <select id="bulkActionSelect">
            <option value="select">- Select Action -</option>
            <option value="edit">Edit Metadata</option>
            <option value="delete">Delete Recordings</option>
          </select>
          <button type="button" class="recordings-cancel-bulk-action" id="cancelBulkAction">
            <span id="i18n_button_cancel_bulk_action">Cancel Bulk Action</span>
          </button>
        </div>
        <div id="bulkEditPanel">
          <!-- Common Information -->
          <div class="ui-widget layout-centered">
            <div class="ui-widget-content ui-corner-all">
              <form action="">
                <ul class="oc-ui-form-list">
                  <li>
                    <label for="title" id="titleLabel"><span id="i18n_title_label">Title</span>:</label>
                    <input type="text" id="title" name="title" class="oc-ui-form-field" />
                  </li>
                  <li id="seriesContainer">
                    <label for="seriesSelect" id="seriesLabel"><span id="i18n_series_label">Series</span>:</label>
                    <input type="text" class="oc-ui-form-field ui-autocomplete-input" name="seriesSelect" id="seriesSelect" />
                    <input type="hidden" id="series" />
                  </li>
                  <li>
                    <label for="creator" id="creatorLabel"><span id="i18n_presenter_label">Presenter</span>:</label>
                    <input type="text" class="oc-ui-form-field" name="creator" id="creator" />
                  </li>
                </ul>
              </form>
            </div>
          </div>
          <!-- Optional Information -->
          <div class="ui-widget oc-ui-collapsible-widget layout-centered">
            <div class="ui-widget-header ui-corner-top oc-ui-cursor">
              <span class="ui-icon ui-icon-triangle-1-e layout-float-left"></span>
              <span id="i18n_additional">Aditional Description</span>
            </div>
            <div class="ui-widget-content ui-corner-bottom">
              <form action="">
                <ul class="oc-ui-form-list">
                  <li>
                    <label for="contributor" id="contributorLabel"><span id="i18n_dept_label">Department</span>:</label>
                    <input type="text" class="oc-ui-form-field" name="contributor" id="contributor">
                  </li>
                  <li>
                    <label for="subject" id="subjectLabel"><span id="i18n_sub_label">Subject</span>:</label>
                    <input type="text" class="oc-ui-form-field" name="subject" id="subject">
                  </li>
                  <li>
                    <label for="language" id="languageLabel"><span id="i18n_lang_label">Language</span>:</label>
                    <input type="text" class="oc-ui-form-field" name="language" id="language">
                  </li>
                  <li>
                    <label for="description" id="descriptionLabel"><span id="i18n_desc_label">Description</span>:</label>
                    <textarea name="description" id="description" class="oc-ui-form-field" rows="5" cols="10"></textarea>
                  </li>
                </ul>
              </form>
            </div>
          </div>
        </div>
        <div id="bulkActionApply">
          <div class="ui-widget ui-widget-content ui-corner-all layout-centered">
            <ul class="oc-ui-form-list">
              <li>
                <label>&nbsp;</label>
                <span id="bulkActionApplyMessage"></span>
              </li>
              <li>
                <label>&nbsp;</label>
                <button type="button" id="applyBulkAction">
                  <span id="i18n_button_apply_bulk_action">Apply Changes</span>
                </button>
                <button type="button" id="cancelBulkAction" class="recordings-cancel-bulk-action">
                  <span id="i18n_button_cancel_bulk_action">Cancel Bulk Action</span>
                </button>
              </li>
            </ul>
          </div>
        </div>
        <div id="deleteModal" title="Delete Progress">
          <div id="deleteProgress"> </div>
        </div>
      </div>
      <div id="tableContainer" class="ui-widget ui-helper-clearfix"></div>

      <!-- div id="controlsFoot" class="ui-widget-header ui-corner-bottom ui-helper-clearfix" -->
      <div id="controlsFoot" class="ui-helper-clearfix">
        <div id="refreshControlsContainer" class="layout-float-left ui-widget ui-state-default ui-corner-all ui-helper-clearfix">
          <input type="checkbox" id="refreshEnabled"><label for="refreshEnabled"></label>
            <span class="refresh-text">Update table every&nbsp;</span>
            <select id="refreshInterval">
              <option value="5">5</option>
              <option value="7">7</option>
              <option value="10">10</option>
            </select>
            <span class="refresh-text">&nbsp;seconds.</span>
        </div>
        <div class="ui-widget ui-state-default ui-corner-all ui-helper-clearfix layout-float-left">
          Show
          <select id="pageSize">
            <option>5</option>
            <option selected="selected">10</option>
            <option>20</option>
            <option>50</option>
            <option>100</option>
          </select>
          Recordings per page.
        </div>
        <div class="layout-float-right">
          <!--<label for="page">Goto page: </label><input type="text" id="page" value="1" />-->
          <div id="pageWidget" class="layout-inline">
            <a class="prevPage" href="javascript:ocRecordings.Configuration.page=0;ocRecordings.reload();">&lt;&lt;first</a>
            <a class="prevPage" href="javascript:ocRecordings.previousPage();" id="previousPage">&lt;previous</a>
            <div id="pageList" class="layout-inline"></div>
            <a class="nextPage" href="javascript:ocRecordings.nextPage();" id="nextPage">next&gt;</a>
            <a class="nextPage" href="javascript:ocRecordings.lastPage();" id="lastPage">last&gt;&gt;</a>
          </div>
        </div>
      </div>
    </div>

    <!-- HoldAction panel -->
    <div id="holdActionStage" style="display:none">
      <input type="hidden" id="holdWorkflowId" value="">
      <iframe id="holdActionUI"></iframe>
    </div>

    <div id="templates" style="display:none;">
      <textarea id="tableTemplate">
<table id="recordingsTable" class="ui-widget" cellspacing="0" width="100%">
  <thead>
    <tr>
      <th class="recordings-table-head"><span id="filterRecordingCount"></span>
      <th colspan="4">&nbsp;</th>
      <th class="recordings-table-head ui-helper-hidden" id="bulkActionButton"><a href="javascript:ocRecordings.displayBulkAction()">Bulk Action</a></th>
    </tr>
    <tr>
      <th id="sortTitle" width="25%" class="ui-state-default sortable">Title<span class="sort-icon ui-icon ui-icon-triangle-2-n-s"></span></th>
      <th id="sortPresenter" width="15%" class="ui-state-default sortable">Presenter<span class="sort-icon ui-icon ui-icon-triangle-2-n-s"></span></th>
      <th id="sortSeries" width="15%" class="ui-state-default sortable">Course/Series<span class="sort-icon ui-icon ui-icon-triangle-2-n-s"></span></th>
      <th id="sortDate" width="18%" class="ui-state-default sortable">Recording Date&amp;Time<span class="sort-icon ui-icon ui-icon-triangle-2-n-s"></span></th>
      <th width="17%" class="ui-state-default">Status</th>
      <th width="10%" class="ui-state-default">Action</th>
    </tr>
  </thead>
  <tbody>
    {for recording in recordings}
      <tr valign="middle">
        <td>
          ${recording.title}
        </td>
        <td>
          ${recording.creators}
        </td>
        <td>
          ${recording.seriesTitle}
        </td>
        <td>
          ${recording.start}
        </td>
        <td class="status-column-cell">
          <div class="workflowActionButton ui-helper-clearfix" style="float:left;">
            <a href="inspect.html?id=${recording.id}" title="View Technical Details for this Recording">
              <span class="ui-icon ui-icon-gear inspect-workflow-button" style="float:left;"></span>
            </a>
          </div>
          <div style="padding-top:3px;">
          {if recording.error}
          <div class="foldable">
            <div class="fold-header" style="color:red;font-weight:bold;">FAILED</div>
            <div class="fold-body">
              ${recording.error}
            </div>
          </div>
          {else}
            ${recording.state}
            {if recording.operation}
              :&nbsp;${recording.operation}
            {/if}
          {/if}
          </div>
        </td>
        <td>
          ${ocRecordings.makeActions(recording, recording.actions)}
          {if recording.holdAction}
          <br><a href="javascript:ocRecordings.displayHoldUI(${recording.id});" title="${recording.holdAction.title}">${recording.holdAction.title}</a>
          {/if}
        </td>
      </tr>
    {forelse}
      <tr>
        <td colspan="6" align="center">
          No Recordings found
        </td>
      </tr>
    {/for}
  </tbody>
</table>
      </textarea>

      <textarea id="tableSelectTemplate">
<table id="recordingsTable" class="ui-widget" cellspacing="0" width="100%">
  <thead>
    <tr>
      <th>&nbsp;</th>
      <th class="recordings-table-head"><span id="filterRecordingCount"></span>
      <th colspan="5">&nbsp;</th>
    </tr>
    <tr>
      <th class="ui-state-default"><input type="checkbox" id="selectAllRecordings" onclick="ocRecordings.selectAll(this.checked);" />
      <th id="sortTitle" width="25%" class="ui-state-default sortable">Title<span class="sort-icon ui-icon ui-icon-triangle-2-n-s"></span></th>
      <th id="sortPresenter" width="15%" class="ui-state-default sortable">Presenter<span class="sort-icon ui-icon ui-icon-triangle-2-n-s"></span></th>
      <th id="sortSeries" width="15%" class="ui-state-default sortable">Course/Series<span class="sort-icon ui-icon ui-icon-triangle-2-n-s"></span></th>
      <th id="sortDate" width="18%" class="ui-state-default sortable">Recording Date&amp;Time<span class="sort-icon ui-icon ui-icon-triangle-2-n-s"></span></th>
      <th width="17%" class="ui-state-default">Status<span class="sort-icon ui-icon ui-icon-triangle-2-n-s"></span></th>
      <th width="10%" class="ui-state-default">Action<span class="sort-icon ui-icon ui-icon-triangle-2-n-s"></span></th>
    </tr>
  </thead>
  <tbody>
    {for recording in recordings}
      <tr valign="top">
        <td><input type="checkbox" value="${recording.id}" class="selectRecording" /></td>
        <td>
          ${recording.title}
        </td>
        <td>
          ${recording.creators}
        </td>
        <td>
          ${recording.seriesTitle}
        </td>
        <td>
          ${recording.start}
        </td>
        <td class="status-column-cell" title="Click inspect this workflow">
          {if recording.error}
            <span style="color:red;font-weight:bold;">FAILED</span>
          {else}
            ${recording.state}
            {if recording.operation}
              :&nbsp;${recording.operation}
            {/if}
          {/if}
        </td>
        <td>
          ${ocRecordings.makeActions(recording.id, recording.actions)}
          {if recording.holdAction}
          <br><a href="javascript:ocRecordings.displayHoldUI(${recording.id});" title="${recording.holdAction.title}">${recording.holdAction.title}</a>
          {/if}
        </td>
      </tr>
    {forelse}
      <tr>
        <td colspan="6" align="center">
          No Recordings found
        </td>
      </tr>
    {/for}
  </tbody>
</table>
      </textarea>

    </div>
  </body>
</html>
