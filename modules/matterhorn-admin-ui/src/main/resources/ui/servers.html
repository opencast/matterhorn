<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <!-- scripts -->
    <script type="text/javascript" src="jquery/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="trimpath/trimpath-template-1.0.38.js"></script>
    <script type="text/javascript" src="js/oc.services.js"></script>
    <script type="text/javascript" src="/remote/rest/services.json?jsonp=Opencast.Services.buildServersView"></script>
    <script type="text/javascript">
      jQuery(document).ready(function() {
        var result = TrimPath.processDOMTemplate("serversTemplate", Opencast.Services);
        jQuery("#serversDisplay").html(result);
      });
    </script>
  </head>
  <body>

    <!-- The div to place the contents of the rendered template -->
    <div id="serversDisplay"></div>
    
    <!--template -->
    <textarea id="serversTemplate" style="display:none">
      {for server in serversView}
        <h2>${server.host}</h2>
        <table>
          <th>Service</th>
          <th>Jobs Running</th>
          <th>Jobs Queued</th>
          <th>Mean Run Time</th>
          <th>Mean Queue Time</th>
          {for service in server.services}
            <tr>
              <td>${service.id}</td>
              <td>${service.running}</td>
              <td>${service.queued}</td>
              <td>${service.runtime}</td>
              <td>${service.queuetime}</td>
            </tr>
          {/for}
        </table>
      {/for}
    </textarea>

  </body>
</html>
