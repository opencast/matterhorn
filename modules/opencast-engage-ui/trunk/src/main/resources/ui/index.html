<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <!------------------------- HEAD ------------------------->
  <head>
    <title>Search</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <!-- styles -->
    <link rel="stylesheet" type="text/css" href="infusion-1.1.2/fss/css/fss-reset.css" />
    <link rel="stylesheet" type="text/css" href="infusion-1.1.2/fss/css/fss-layout.css" />
    <link rel="stylesheet" type="text/css" href="infusion-1.1.2/fss/css/fss-text.css" />
    <link rel="stylesheet" type="text/css" href="infusion-1.1.2/fss/css/fss-theme-mist.css" />
    <link rel="stylesheet" type="text/css" href="css/oc.search.browse.css" />
    <link rel="stylesheet" type="text/css" href="css/oc.pager.css" />

    <!-- scripts -->
    <script type="text/javascript" src="jquery/jquery/jquery-1.3.2.js"></script>
    <script type="text/javascript" src="js/jquery.xslt.js"></script>
    <script type="text/javascript" src="js/oc-pager.js"></script>
    <script type="text/javascript" src="js/engage-ui.js"></script>
    <script type="text/javascript">
      $(document).ready( function() {

        var page = Opencast.pager.getCurrentPageID();
        var searchQuery = Opencast.pager.getCurrentSearchQuery();
        var restEndpoint = "../../engageui/rest/search?";
        
        if(searchQuery != null) {
          restEndpoint = restEndpoint + "q="+searchQuery+"&";

          // replace all occurences of + by a space
          searchQuery = searchQuery.replace(/\+/g," ");

          $('#searchField').attr("value", unescape(searchQuery));
          
        }

        restEndpoint = restEndpoint + "page="+page;

        $('#stage').xslt(restEndpoint, "xsl/episodes.xsl", function() {
          Opencast.pager.renderPager();

          $('#title').append($('#oc-from-index').html());
          $('#title').append("-"+ $('#oc-to-index').html());
          $('#title').append(" of "+ $('#oc-episodes-max').html());
        });
      });

      
    </script>

  </head>

  <!------------------------- BODY ------------------------->
  <body>
    <div class="oc-holder">
      <img src="img/opencast_logo.gif" />
      <div class="oc-search-bar-holder fl-helper-clearfix">
        &nbsp;
        <div class="oc-search-bar">
          <form action="index.html">
            <input id="searchField" type="text" name="q" value="" />
            <input type="submit" value="Search" />
          </form>
        </div>
      </div>
      <div class="oc-search-result-header">
        <h2 id="title">Episodes </h2>
        <div class="oc-sort-controls">
        </div>
      </div>
      <div class="oc-search-result-items">
        <div id="stage">
          loading episodes...
        </div>
        <div class="oc-pager">
          <ul id="navigation">
          </ul>
        </div>
      </div>
    </div>
  </body>
</html>
