<html>
  <head>
  </head>
  <body>
    <h2>
      Workflow Service REST endpoint
    </h2>
    
    <h4>
      Workflow Definitions
    </h4>
    <div>
      <b>GET definitions</b> returns all available workflow definitions
    </div>
    <h4>
      Workflow Instances
    </h4>
    <div>
      <b>GET instances/{state}?startPage=2&count=1</b> returns paged sets of workflow instances in a given state
      <a href="instances/running">running</a>,
      <a href="instances/paused">paused</a>,
      <a href="instances/stopped">stopped</a>,
      <a href="instances/succeeded">succeeded</a>,
      <a href="instances/failed">failed</a>)
    </div>
    <div>
      <b>GET instances?q=climate&startPage=2&count=1</b> returns paged sets of workflow instances matching a search parameter
    </div>
    <div>
      <b>GET instance/{id}</b> returns a workflow instance
    </div>
    <div>
      <b>GET /workflow/rest/allinstances</b> returns all workflow instances, along with a subset of dublin core metadata, as a json array
      <pre>
{"workflows" : [
 { "workflow_id" : "de9609eb-2251-42f8-a190-756347380182",
   "workflow_title" : "Transcode and Distribute",
   "workflow_current_operation" : "distribute",
   "workflow_state" : "succeeded",
   "mediapackage_title" : "Land and Vegetation: Key players on the Climate Scene"
 },
 { "workflow_id" : "cb7e055b-2c9f-4924-970b-8f0f74d82def",
   "workflow_title" : "Transcode and Distribute",
   "workflow_current_operation" : "distribute",
   "workflow_state" : "succeeded",
   "mediapackage_title" : "Land and Vegetation: Key players on the Climate Scene"
 }
]}
      </pre>
    </div>



    <div>
      <b>GET /workflow/rest/instanceinfo/{id}</b> returns a workflow instance, along with all available dublin core metadata, as json object
      <pre>
 { "workflow_id" : "de9609eb-2251-42f8-a190-756347380182",
   "workflow_title" : "Transcode and Distribute",
   "workflow_current_operation" : "distribute",
   "workflow_state" : "succeeded",
   "mediapackage_creator" : "null",
   "mediapackage_format" : "video/x-dv",
   "mediapackage_contributor" : "null",
   "mediapackage_coverage" : "null",
   "mediapackage_promoted" : "true",
   "mediapackage_type" : "null",
   "mediapackage_extent" : "null",
   "mediapackage_ispartof" : "null",
   "mediapackage_license" : "null",
   "mediapackage_available" : "null",
   "mediapackage_advertised" : "null",
   "mediapackage_created" : "null",
   "mediapackage_source" : "null",
   "mediapackage_abstract" : "null",
   "mediapackage_temporal" : "null",
   "mediapackage_relation" : "null",
   "mediapackage_description" : "Introduction lecture from the Institute for Atmospheric and Climate Science.",
   "mediapackage_subject" : "climate, land, vegetation",
   "mediapackage_isreferencedby" : "null",
   "mediapackage_language" : "null",
   "mediapackage_rightsholder" : "null",
   "mediapackage_publisher" : "ETH Zurich, Switzerland",
   "mediapackage_accessrights" : "null",
   "mediapackage_spatial" : "null",
   "mediapackage_isreplacedby" : "null",
   "mediapackage_date" : "null",
   "mediapackage_identifier" : "10.0000/5819",
   "mediapackage_replaces" : "null",
   "mediapackage_rights" : "null",
   "mediapackage_title" : "Land and Vegetation: Key players on the Climate Scene"
 }
      </pre>
    </div>

    <div>
      <b>POST start</b> starts a workflow instance, based on the specified xml workflow definition (form element='definition'),
      the media package xml (form element='mediapackage'), and key-value properties (from element='properties')
      <form action="start" method="POST">
        Workflow Definition XML<br/>
        <textarea rows="20" cols="80" id="definition" name="definition">
          <workflow-definition>
            <title>Transcode and Distribute</title>
            <description>
              A simple workflow that transcodes the media into distribution formats, then sends the resulting distribution files,
              along with their associated metadata, to the distribution channels.
            </description>
            <operations>
              <operation
                name="compose"
                fail-on-error="true"
                exception-handler-workflow="Default Error Handler"
                description="Encode media"/>
          
              <operation
                name="distribute"
                fail-on-error="true"
                exception-handler-workflow="Default Error Handler"
                description="Distribute media to distribution channels"/>
            </operations>
          </workflow-definition>
        </textarea><br/>
        Media Package XML<br/>
        <textarea rows="20" cols="80" id="mediapackage" name="mediapackage">
          <mediapackage id="10.0000/1" start="2007-12-05T13:40:00" duration="1004400000">
            <metadata>
              <catalog id="catalog-1" type="metadata/dublincore">
                <mimetype>text/xml</mimetype>
                <url>http://source.opencastproject.org/svn/modules/opencast-media/trunk/src/test/resources/dublincore.xml</url>
                <checksum type="md5">20e466615251074e127a1627fd0dae3e</checksum>
              </catalog>
            </metadata>
          </mediapackage>
        </textarea><br/>
        Key/Value Properties<br/>
        <textarea rows="20" cols="80" id="properties" name="properties">this=that</textarea><br/>
        <input type="submit" value="Start workflow"/>
      </form>
    </div>
    <div>
      <b>GET stop/{id}</b> stops a running workflow instance (TODO: Change this to post... using GET only to make testing easier)
    </div>
    <div>
      <b>GET suspend/{id}</b> suspends a workflow instance (TODO: Change this to post... using GET only to make testing easier)
    </div>
    <div>
      <b>GET resume/{id}</b> resume a suspended workflow instance (TODO: Change this to post... using GET only to make testing easier)
    </div>
    
    <div>
      $Rev$
    </div>
  </body>
</html>
