<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Scheduler REST Documentation</title>
  <style type="text/css">
  /* styles for the page */
  fieldset {
     margin-top: 0.5em;
     width: 90%;
  }
  table {
     width: 100%;
  }
  .method_set_header {
    padding-left: 0.5em;
    padding-right: 0.5em;
    font-size: 1.4em;
    font-weight: bold;
  }
  .method_header {
     background-color: #FFC;
  }
  .method_header TH {
        text-align: left;
        padding: 0.3em;
  }
  .method TD {
     padding-left: 0.3em;
     padding-top: 0.1em;
     vertical-align: top;
  }
  .method_odd {
     background-color: #FFF;
  }
    .method_even {
       background-color: #DDD;
    }
  </style>
</head>
<body>
<h1>Scheduler REST Documentation</h1>

<fieldset>
  <legend class="method_set_header">Methods</legend>
  <table cellpadding="0px" cellspacing="0px">
    <thead>
      <tr class="method_header">
        <th width="20%">NAME</th>
        <th>VALUE and NOTES</th>
      </tr>
    </thead>
    <tbody>
      <tr class="method_odd method">
        <td>Method / Path:</td>
        <td><tt>POST /addEvent</tt></td>
      </tr>
      <tr class="method_even method">
        <td>Description:</td>
        <td>Stores a new event in the database. As a result the event will be returned, but some fields especially the event-id may have been updated. <br />
        Within the metadata section it is possible to add any additional metadata as a key-value pair. The information will be stored even if the key is yet unknown.</td>
      </tr>
      <tr class="method_odd method">
        <td>Optional parameters:</td>
        <td> None </td>
      </tr>
      <tr class="method_even method">
        <td>Response formats:</td>
        <td>
          <a href="http://www.w3.org/XML/">xml</a> (<a href="@SERVER_URL@/addEvent">@SERVER_URL@/addEvent</a>)<br/>
        </td>
      </tr>
      <tr class="method_odd method">
        <td>Status codes</td>
        <td>
          200: OK, valid request, results returned
          <br />
          400: Bad Request, invalid arguments in request, error message
        </td>
      </tr>
      <tr class="method_even method">
         <td>Example:</td>
         <td>
           <form action="addEvent" method="POST">
             SchedulerEvent XML<br/>
             <textarea rows="20" cols="80" id="event" name="event">         
<ns1:SchedulerEvent xmlns:ns1="http://scheduler.opencastproject.org">
  <id>c0e3d8a7-7ecc-479b-aee7-8da369e445f2</id>
  <metadata>
    <item key="channel-id"><value>1</value></item>
    <item key="creator"><value>lecturer</value></item>
    <item key="device"><value>recorder</value></item>
    <item key="title"><value>Test title</value></item>
    <item key="abstract"><value>a description of the event</value></item>
    <item key="contributor"><value>The contribution institution</value></item>
    <item key="series-id"><value>c0e3d8a7-7ecc-479b-1234-8da369e445f2</value></item>
    <item key="location"><value>my room</value></item>
  </metadata>
  <startdate>1262631892201</startdate>
  <enddate>1262644114423</enddate>
  <duration>12222222</duration>
  <attendees>
    <attendee>recorder</attendee>
    <attendee>another attendee</attendee>
  </attendees>
  <resources>
    <resource>vga</resource>
    <resource>audio</resource>
  </resources>
</ns1:SchedulerEvent>
             </textarea><br/>
     		 <input type="submit" value="add Event"/>
          </form>        
    </tbody>
  </table>

  <table cellpadding="0px" cellspacing="0px">
    <thead>
      <tr class="method_header">
        <th width="20%">NAME</th>
        <th>VALUE and NOTES</th>
      </tr>
    </thead>
    <tbody>
      <tr class="method_odd method">
        <td>Method / Path:</td>
        <td><tt>POST /updateEvent</tt></td>
      </tr>
      <tr class="method_even method">
        <td>Description:</td>
        <td>Updates an existing event in the database. The event-id has to be stored in the database already. Will return true, if the event was found and could be updated.</td>
      </tr>
      <tr class="method_odd method">
        <td>Optional parameters:</td>
        <td> None </td>
      </tr>
      <tr class="method_even method">
        <td>Response formats:</td>
        <td>
          <a href="http://java.sun.com/javase/6/docs/api/java/lang/Boolean.html">boolean</a> (<a href="@SERVER_URL@/updateEvent">@SERVER_URL@/updateEvent</a>)<br/>
        </td>
      </tr>
      <tr class="method_odd method">
        <td>Status codes</td>
        <td>
          200: OK, valid request, results returned
          <br />
          400: Bad Request, invalid arguments in request, error message
        </td>
      </tr>
      <tr class="method_even method">
         <td>Example:</td>
         <td>
           <form action="updateEvent" method="POST">
             SchedulerEvent XML<br/>
             <textarea rows="20" cols="80" id="event" name="event">           
<ns1:SchedulerEvent xmlns:ns1="http://scheduler.opencastproject.org">
  <id>c0e3d8a7-7ecc-479b-aee7-8da369e445f2</id>
  <metadata>
    <item key="channel-id"><value>1</value></item>
    <item key="creator"><value>lecturer</value></item>
    <item key="device"><value>recorder</value></item>
    <item key="title"><value>Test title</value></item>
    <item key="abstract"><value>a description of the event</value></item>
    <item key="contributor"><value>The contribution institution</value></item>
    <item key="series-id"><value>c0e3d8a7-7ecc-479b-1234-8da369e445f2</value></item>
    <item key="location"><value>my room</value></item>
  </metadata>
  <startdate>1262631892201</startdate>
  <enddate>1262644114423</enddate>
  <duration>12222222</duration>
  <attendees>
    <attendee>recorder</attendee>
    <attendee>another attendee</attendee>
  </attendees>
  <resources>
    <resource>vga</resource>
    <resource>audio</resource>
  </resources>
</ns1:SchedulerEvent>
             </textarea><br/>
     		 <input type="submit" value="update Event"/>
          </form>        
    </tbody>
  </table>

  <table cellpadding="0px" cellspacing="0px">
    <thead>
      <tr class="method_header">
        <th width="20%">NAME</th>
        <th>VALUE and NOTES</th>
      </tr>
    </thead>
    <tbody>
      <tr class="method_odd method">
        <td>Method / Path:</td>
        <td><tt>GET /removeEvent</tt></td>
      </tr>
      <tr class="method_even method">
        <td>Description:</td>
        <td>Removes the specified event from the database. Returns true if the event was found and could be removed.</td>
      </tr>
      <tr class="method_odd method">
        <td>Required (path) parameters:</td>
        <td>
          <tt>eventID=aeed7c1d-852c-4600-8692-6ba180aa167f</tt>: The unique ID of the event. 
        </td>
      </tr>
      <tr class="method_even method">
        <td>Required (form) parameters</td>
        <td>
          <tt>None</tt>
        </td>
      </tr>      
      <tr class="method_odd method">
        <td>Optional parameters:</td>
        <td>
          <tt>None</tt>
        </td>
      </tr>
      <tr class="method_even method">
        <td>Response formats:</td>
        <td>
          <a href="http://java.sun.com/javase/6/docs/api/java/lang/Boolean.html">boolean</a> (<a href="@SERVER_URL@/removeEvent/?eventID=">@SERVER_URL@/removeEvent/?eventID=</a>)
        </td>
      </tr>
      <tr class="method_odd method">
        <td>Status codes</td>
        <td>
          200: OK, valid request, results returned
          <br />
          400: Bad Request, invalid arguments in request, error message
        </td>
      </tr>
    </tbody>
  </table>

  <table cellpadding="0px" cellspacing="0px">
    <thead>
      <tr class="method_header">
        <th width="20%">NAME</th>
        <th>VALUE and NOTES</th>
      </tr>
    </thead>
    <tbody>
      <tr class="method_odd method">
        <td>Method / Path:</td>
        <td><tt>GET /getEvent</tt></td>
      </tr>
      <tr class="method_even method">
        <td>Description:</td>
        <td>Get a specific scheduled event.</td>
      </tr>
      <tr class="method_odd method">
        <td>Required (path) parameters:</td>
        <td>
          <tt>eventID=aeed7c1d-852c-4600-8692-6ba180aa167f</tt>: The unique ID of the event. 
        </td>
      </tr>
      <tr class="method_even method">
        <td>Required (form) parameters</td>
        <td>
          <tt>None</tt>
        </td>
      </tr>      
      <tr class="method_odd method">
        <td>Optional parameters:</td>
        <td>
          <tt>None</tt>
        </td>
      </tr>
      <tr class="method_even method">
        <td>Response formats:</td>
        <td>
          <a href="http://www.w3.org/XML/">xml</a> (<a href="@SERVER_URL@/getEvent/?eventID=">@SERVER_URL@/getEvent/?eventID=</a>)
        </td>
      </tr>
      <tr class="method_odd method">
        <td>Status codes</td>
        <td>
          200: OK, valid request, results returned
          <br />
          400: Bad Request, invalid arguments in request, error message
        </td>
      </tr>
    </tbody>
  </table>

  <table cellpadding="0px" cellspacing="0px">
    <thead>
      <tr class="method_header">
        <th width="20%">NAME</th>
        <th>VALUE and NOTES</th>
      </tr>
    </thead>
    <tbody>
      <tr class="method_odd method">
        <td>Method / Path:</td>
        <td><tt>GET /getEvents</tt></td>
      </tr>
      <tr class="method_even method">
        <td>Description:</td>
        <td>returns all scheduled events </td>
      </tr>
      <tr class="method_odd method">
        <td>Optional parameters:</td>
        <td>
        </td>
      </tr>
      <tr class="method_even method">
        <td>Response formats:</td>
        <td>
          <a href="http://www.w3.org/XML/">xml</a> (<a href="@SERVER_URL@/getEvents">@SERVER_URL@/getEvents</a>)<br/>
        </td>
      </tr>
      <tr class="method_odd method">
        <td>Status codes</td>
        <td>
          200: OK, valid request, results returned
        </td>
      </tr>
    </tbody>
  </table>

  <table cellpadding="0px" cellspacing="0px">
    <thead>
      <tr class="method_header">
        <th width="20%">NAME</th>
        <th>VALUE and NOTES</th>
      </tr>
    </thead>
    <tbody>
      <tr class="method_odd method">
        <td>Method / Path:</td>
        <td><tt>GET /getUpcomingEvents</tt></td>
      </tr>
      <tr class="method_even method">
        <td>Description:</td>
        <td>returns all future scheduled events </td>
      </tr>
      <tr class="method_odd method">
        <td>Optional parameters:</td>
        <td>
        </td>
      </tr>
      <tr class="method_even method">
        <td>Response formats:</td>
        <td>
          <a href="http://www.w3.org/XML/">xml</a> (<a href="@SERVER_URL@/getUpcomingEvents">@SERVER_URL@/getUpcomingEvents</a>)<br/>
        </td>
      </tr>
      <tr class="method_odd method">
        <td>Status codes</td>
        <td>
          200: OK, valid request, results returned
        </td>
      </tr>
    </tbody>
  </table>

  <table cellpadding="0px" cellspacing="0px">
    <thead>
      <tr class="method_header">
        <th width="20%">NAME</th>
        <th>VALUE and NOTES</th>
      </tr>
    </thead>
    <tbody>
      <tr class="method_odd method">
        <td>Method / Path:</td>
        <td><tt>POST /getEvents</tt></td>
      </tr>
      <tr class="method_even method">
        <td>Description:</td>
        <td>returns scheduled events, that pass the <tt>filter</tt>. <br>
        	<tt>filter:</tt> an xml definition of the filter. Tags that are not included will noct be filtered. Possible values for order by are 
        	title,creator,series,time-asc,time-desc,contributor,channel,location,device</td>
      </tr>
      <tr class="method_odd method">
        <td>Optional parameters:</td>
        <td>
        </td>
      </tr>
      <tr class="method_even method">
        <td>Response formats:</td>
        <td>
          <a href="http://www.w3.org/XML/">xml</a> (<a href="@SERVER_URL@/getEvents">@SERVER_URL@/getEvents</a>)<br/>
        </td>
      </tr>
      <tr class="method_odd method">
        <td>Status codes</td>
        <td>
          200: OK, valid request, results returned
        </td>
      </tr>
      <tr class="method_even method">
         <td>Example:</td>
         <td>
           <form action="getEvents" method="POST">
             SchedulerFilter XML<br/>
             <textarea rows="20" cols="80" id="filter" name="filter">    
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ns2:SchedulerFilter xmlns:ns2="http://scheduler.opencastproject.org/">
<event-id>exact id to search for</event-id>
<device>pattern to search for</device>
<title>pattern to search for</title>
<creator>pattern to search for</creator>
<abstract>A short description of the content of the lecture</abstract>
<startdate>begin of the period of valid events</startdate>
<enddate>end of the period of valid events</enddate>
<contributor>pattern to search for</contributor>
<series-id>ID of the series which will be filtered</series-id>
<channel-id>ID of the channel that will be filtered</channel-id>
<location>pattern to search for</location>
<attendee>pattern to search for</attendee>
<resource>pattern to search for</resource>
<order-by>title|creator|series|time-asc|time-desc|contributor|channel|location|device</order-by>
</ns2:SchedulerFilter>
             </textarea><br/>
     		 <input type="submit" value="get filtered Events"/>
          </form>        
    </tbody>
  </table>
 
  <table cellpadding="0px" cellspacing="0px">
    <thead>
      <tr class="method_header">
        <th width="20%">NAME</th>
        <th>VALUE and NOTES</th>
      </tr>
    </thead>
    <tbody>
      <tr class="method_odd method">
        <td>Method / Path:</td>
        <td><tt>POST /findConflictingEvents</tt></td>
      </tr>
      <tr class="method_even method">
        <td>Description:</td>
        <td>Looks for events that are conflicting with the given event, because they use the same recorder at the same time
      </tr>
      <tr class="method_odd method">
        <td>Optional parameters:</td>
        <td> None </td>
      </tr>
      <tr class="method_even method">
        <td>Response formats:</td>
        <td>
          <a href="http://www.w3.org/XML/">xml</a> (<a href="@SERVER_URL@/findConflictingEvents">@SERVER_URL@/findConflictingEvents</a>)<br/>
        </td>
      </tr>
      <tr class="method_odd method">
        <td>Status codes</td>
        <td>
          200: OK, valid request, results returned
          <br />
          400: Bad Request, invalid arguments in request, error message
        </td>
      </tr>
      <tr class="method_even method">
         <td>Example:</td>
         <td>
           <form action="findConflictingEvents" method="POST">
             SchedulerEvent XML<br/>
             <textarea rows="20" cols="80" id="event" name="event">         
<ns1:SchedulerEvent xmlns:ns1="http://scheduler.opencastproject.org">
  <id>c0e3d8a7-7ecc-479b-aee7-8da369e445f2</id>
  <metadata>
    <item key="channel-id"><value>1</value></item>
    <item key="creator"><value>lecturer</value></item>
    <item key="device"><value>recorder</value></item>
    <item key="title"><value>Test title</value></item>
    <item key="abstract"><value>a description of the event</value></item>
    <item key="contributor"><value>The contribution institution</value></item>
    <item key="series-id"><value>c0e3d8a7-7ecc-479b-1234-8da369e445f2</value></item>
    <item key="location"><value>my room</value></item>
  </metadata>
  <startdate>1262631892201</startdate>
  <enddate>1262644114423</enddate>
  <duration>12222222</duration>
  <attendees>
    <attendee>recorder</attendee>
    <attendee>another attendee</attendee>
  </attendees>
  <resources>
    <resource>vga</resource>
    <resource>audio</resource>
  </resources>
</ns1:SchedulerEvent>
             </textarea><br/>
     		 <input type="submit" value="find Events"/>
          </form>        
    </tbody>
  </table>
 
  
  <table cellpadding="0px" cellspacing="0px">
    <thead>
      <tr class="method_header">
        <th width="20%">NAME</th>
        <th>VALUE and NOTES</th>
      </tr>
    </thead>
    <tbody>
      <tr class="method_odd method">
        <td>Method / Path:</td>
        <td><tt>GET /getDublinCoreMetadata</tt></td>
      </tr>
      <tr class="method_even method">
        <td>Description:</td>
        <td>Gets a XML with the Dublin Core metadata for the specified event. </td>
      </tr>
      <tr class="method_odd method">
        <td>Required (path) parameters:</td>
        <td>
          <tt>eventID=aeed7c1d-852c-4600-8692-6ba180aa167f</tt>: The unique ID of the event. 
        </td>
      </tr>
      <tr class="method_even method">
        <td>Required (form) parameters</td>
        <td>
          <tt>None</tt>
        </td>
      </tr>      
      <tr class="method_odd method">
        <td>Optional parameters:</td>
        <td>
          <tt>None</tt>
        </td>
      </tr>
      <tr class="method_even method">
        <td>Response formats:</td>
        <td>
          <a href="http://www.w3.org/XML/">xml</a>:<a href="http://dublincore.org/">Dublin Core</a> (<a href="@SERVER_URL@/getDublinCoreMetadata/?eventID=">@SERVER_URL@/getDublinCoreMetadata/?eventID=</a>)
        </td>
      </tr>
      <tr class="method_odd method">
        <td>Status codes</td>
        <td>
          200: OK, valid request, results returned
          <br />
          400: Bad Request, invalid arguments in request, error message
        </td>
      </tr>
    </tbody>
  </table>
  
  <table cellpadding="0px" cellspacing="0px">
    <thead>
      <tr class="method_header">
        <th width="20%">NAME</th>
        <th>VALUE and NOTES</th>
      </tr>
    </thead>
    <tbody>
      <tr class="method_odd method">
        <td>Method / Path:</td>
        <td><tt>GET /getCaptureAgentMetadata</tt></td>
      </tr>
      <tr class="method_even method">
        <td>Description:</td>
        <td>Gets java Properties file with technical metadata for the specified event. </td>
      </tr>
      <tr class="method_odd method">
        <td>Required (path) parameters:</td>
        <td>
          <tt>eventID=aeed7c1d-852c-4600-8692-6ba180aa167f</tt>: The unique ID of the event. 
        </td>
      </tr>
      <tr class="method_even method">
        <td>Required (form) parameters</td>
        <td>
          <tt>None</tt>
        </td>
      </tr>      
      <tr class="method_odd method">
        <td>Optional parameters:</td>
        <td>
          <tt>None</tt>
        </td>
      </tr>
      <tr class="method_even method">
        <td>Response formats:</td>
        <td>
          <a href="http://java.sun.com/javase/6/docs/api/java/util/Properties.html">Java Properties file</a> (<a href="@SERVER_URL@/getCaptureAgentMetadata/?eventID=">@SERVER_URL@/getCaptureAgentMetadata/?eventID=</a>)
        </td>
      </tr>
      <tr class="method_odd method">
        <td>Status codes</td>
        <td>
          200: OK, valid request, results returned
          <br />
          400: Bad Request, invalid arguments in request, error message
        </td>
      </tr>
    </tbody>
  </table>  
  
  <table cellpadding="0px" cellspacing="0px">
    <thead>
      <tr class="method_header">
        <th width="20%">NAME</th>
        <th>VALUE and NOTES</th>
      </tr>
    </thead>
    <tbody>
      <tr class="method_odd method">
        <td>Method / Path:</td>
        <td><tt>GET /getCalendarForCaptureAgent</tt></td>
      </tr>
      <tr class="method_even method">
        <td>Description:</td>
        <td>Gets the iCalendar with all (even old) events for the specified capture agent id.  </td>
      </tr>
      <tr class="method_odd method">
        <td>Required (path) parameters:</td>
        <td>
          <tt>captureAgentID=recorder</tt>: The ID that specifies the capture agent. 
        </td>
      </tr>
      <tr class="method_even method">
        <td>Required (form) parameters</td>
        <td>
          <tt>None</tt>
        </td>
      </tr>      
      <tr class="method_odd method">
        <td>Optional parameters:</td>
        <td>
          <tt>None</tt>
        </td>
      </tr>
      <tr class="method_even method">
        <td>Response formats:</td>
        <td>
          <a href="http://tools.ietf.org/html/rfc2445">iCalendar</a> (<a href="@SERVER_URL@/getCalendarForCaptureAgent/?captureAgentID=">@SERVER_URL@/getCalendarForCaptureAgent/?captureAgentID=</a>)
        </td>
      </tr>
      <tr class="method_odd method">
        <td>Status codes</td>
        <td>
          200: OK, valid request, results returned
          <br />
          400: Bad Request, invalid arguments in request, error message
        </td>
      </tr>
    </tbody>
  </table>   
  
</fieldset>

<fieldset>
  <legend class="method_set_header">General Notes</legend>
  <ul>
        <li>All paths above are relative to the REST endpoint base (something like http://localhost:8080/scheduler/rest)</li>
    <li>If the service is down or not working it will return a status 503, 
    this means the the underlying service is not working and is either restarting or has failed</li>
    <li>A status code 500 means a general failure has occurred which is not recoverable 
    and was not anticipated. In other words, there is a bug! You should file an error report with
    your server logs from the time when the error occurred: 
    <a href="https://issues.opencastproject.org">Opencast Issue Tracker</a></li>
  </ul>
</fieldset>

<h4>Service of <a href="http://www.opencastproject.org/" title="Opencast Project">Opencast</a>
<a href="http://www.opencastproject.org/project/matterhorn" title="Opencast Matterhorn">Matterhorn</a> $Rev$</h4>
</body>
</html>
